
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a07ce382-cebf-5d83-9af9-c27470030066")}catch(e){}}();
(()=>{var e={8586:(e,t,n)=>{"use strict";n.d(t,{O:()=>Zs});const r=()=>void 0!==window.crypto.randomUUID?window.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>{const t=parseInt(e,10);return((15&(t^crypto.getRandomValues(new Uint8Array(1))[0]))>>t/4).toString(16)}));var i="Metadata key was used more than once in a parameter:",o="NULL argument",s="Key Not Found",a="Ambiguous match found for serviceIdentifier:",c="No matching bindings found for serviceIdentifier:",u="Missing required @injectable annotation in:",l="Missing required @inject or @multiInject annotation in:",d="Circular dependency found:",p="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},f=function(e,t){return"@postConstruct error in class "+e+": "+t},g=function(e,t){return"@preDestroy error in class "+e+": "+t},v=function(e,t){return"onDeactivation() error in class "+e+": "+t},y="Maximum call stack size exceeded",m="named",b="name",_="unmanaged",w="optional",S="inject",A="multi_inject",E="inversify:tagged",R="inversify:tagged_props",O="inversify:paramtypes",x="post_construct",T="pre_destroy";var C=[S,A,b,_,m,w];var I=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===m?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}();function P(e,t,n,r){!function(e){if(void 0!==e)throw new Error(p)}(t),j(E,e,n.toString(),r)}function N(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error(i+" "+n.toString())}else t=[e];return t}function j(e,t,n,r){var o=N(r),s={};Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var a=s[n];if(void 0===a)a=[];else for(var c=function(e){if(o.some((function(t){return t.key===e.key})))throw new Error(i+" "+e.key.toString())},u=0,l=a;u<l.length;u++){c(l[u])}a.push.apply(a,o),s[n]=a,Reflect.defineMetadata(e,s,t)}function k(e){return function(t,n,r){"number"==typeof r?P(t,n,r,e):function(e,t,n){if(void 0!==e.prototype)throw new Error(p);j(R,e.constructor,t,n)}(t,n,e)}}function Z(e){return function(t){return function(n,r,i){if(void 0===t){var o="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+o+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation.")}return k(new I(e,t))(n,r,i)}}}var L=Z(S);var D=Z(A);const M=()=>function(e){if(Reflect.hasOwnMetadata(O,e))throw new Error("Cannot apply @injectable decorator multiple times.");var t=Reflect.getMetadata("design:paramtypes",e)||[];return Reflect.defineMetadata(O,t,e),e},F=e=>L(e),U=()=>k(new I(w,!0)),B=e=>D(e);var V;let $=M()(V=Reflect.metadata("design:type",Function)(V=Reflect.metadata("design:paramtypes",["undefined"==typeof ApplicationConfig?Object:ApplicationConfig,"undefined"==typeof Window?Object:Window])(V=Reflect.metadata("design:type",Function)(V=Reflect.metadata("design:paramtypes",["undefined"==typeof ApplicationConfig?Object:ApplicationConfig,"undefined"==typeof Window?Object:Window])(V=class ApplicationContext{constructor(e,t){this.sessionId=void 0,this.adSet=null,this.metadata=null,this.canRenderApplication=!0,this.window=void 0,this.applicationConfig=void 0,this.sessionId=r(),this.applicationConfig=e,this.window=t}getApplicationConfig(){return this.applicationConfig}getStartTime(){return this.applicationConfig.startTime}getSessionId(){return this.sessionId}setSessionId(e){this.sessionId=e}getApplicationId(){return this.applicationConfig.id}isDebug(){return this.applicationConfig.debug}getVersion(){return this.applicationConfig.version}getWindow(){return this.window}getAdSet(){return this.adSet}setAdSet(e){this.adSet=e}getMetadata(){return this.metadata}setMetadata(e){this.metadata=e}setCanRender(e){this.canRenderApplication=e}canRender(){return this.canRenderApplication}})||V)||V)||V)||V)||V;class event_Event{constructor(){this.propagationStopped=!1}static getEmptyInstance(){return event_Event.emptyEventArgsInstance||(event_Event.emptyEventArgsInstance=new event_Event),event_Event.emptyEventArgsInstance}isPropagationStopped(){return this.propagationStopped}stopPropagation(){this.propagationStopped=!0}}event_Event.emptyEventArgsInstance=void 0;class ApplicationLifecycleEvent extends event_Event{constructor(e){super(),this.application=e}getApplication(){return this.application}}let q=function(e){return e.APPLICATION_PRE_RUN="applicationPreRun",e.APPLICATION_POST_RUN="applicationPostRun",e.APPLICATION_PRE_INIT="applicationPreInit",e.APPLICATION_POST_INIT="applicationPostInit",e.AD_SET_PRE_RESOLVE="adSetPreResolve",e.AD_SET_POST_RESOLVE="adSetPostResolve",e.AD_SET_PRE_RENDER="adSetPreRender",e.AD_SET_POST_RENDER="adSetPostRender",e.AD_SLOT_PRE_RENDER="adSlotPreRender",e.AD_SLOT_POST_RENDER="adSlotPostRender",e.AD_SLOT_CONTAINER_NO_ITEMS="adSlotContainerNoItems",e.AD_SLOT_CONTAINER_NOT_FOUND="adSlotContainerNotFound",e.AD_SLOT_CONTAINER_PRE_RENDER="adSlotContainerPreRender",e.AD_SLOT_CONTAINER_POST_RENDER="adSlotElementPostRender",e.NPI_PRE_DETECT="npiPreDetect",e.NPI_POST_DETECT="npiPostDetect",e.INTEGRATION_PRE_RUN="integrationPreRun",e.INTEGRATION_POST_RUN="integrationPostRun",e.BACKEND_EVENT="backendEvent",e.TELEMETRY_EVENT="telemetryEvent",e.AD_SLOT_CONTAINER_ITEM_VIEW="adSlotContainerItemView",e.AD_SLOT_CONTAINER_VIEW="adSlotContainerView",e}({});var z;let H=M()(z=class Logger{constructor(){this.enabled=!0}debug(...e){this.log(e,"debug")}info(...e){this.log(e,"info")}warn(...e){this.log(e,"warn")}error(...e){this.log(e,"error")}log(e,t){this.enabled&&console[t](`[${t}]`,...e)}setEnabled(e){this.enabled=e}})||z;var W;let K=M()(W=Reflect.metadata("design:type",Function)(W=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(W=Reflect.metadata("design:type",Function)(W=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(W=class EventManager{constructor(e){this.listeners=void 0,this.logger=e,this.listeners=new Map}addListener(e,t){var n;const r=this.resolveHandler(e,t);if(!r)return;const i=null!=(n=this.listeners.get(e))?n:[];i.push(r),this.listeners.set(e,i)}removeListener(e,t){var n;if(!this.listeners.has(e))return;const r=this.resolveHandler(e,t);if(!r)return;const i=null!=(n=this.listeners.get(e))?n:[];for(let o=0;o<i.length;o++){const e=i[o];"__ee__"in e&&"__ee__"in r&&e.__ee__===r.__ee__&&i.splice(o,1)}this.listeners.set(e,i),0===i.length&&this.listeners.delete(e)}addSubscriber(e){for(const[t,n]of Object.entries(e.getSubscribedEvents()))this.addListener(t,[e,n])}removeSubscriber(e){for(const[t,n]of Object.entries(e.getSubscribedEvents()))this.removeListener(t,[e,n])}async dispatch(e,t){var n,r;t||(t=event_Event.getEmptyInstance()),this.logger.debug(`Dispatching event ${e} for event payload ${null==(n=t)?void 0:n.constructor.name}`,{event:t});for(const o of null!=(i=this.listeners.get(e))?i:[]){var i;if("isPropagationStopped"in t&&t.isPropagationStopped())break;await o(t,e)}return this.logger.debug(`Dispatched event ${e} for event payload ${null==(r=t)?void 0:r.constructor.name}`,{event:t}),t}hasListeners(){return this.listeners.size>0}getListeners(e){var t;return null!=(t=this.listeners.get(e))?t:[]}resolveHandler(e,t){let n,r,i=null;return"function"==typeof t?(n={},r=t):"object"==typeof t&&e in t&&"function"==typeof t[e]?(n=t,r=t[e]):Array.isArray(t)&&"object"==typeof t[0]&&t[1]in t[0]&&"function"==typeof t[0][t[1]]&&(n=t[0],r=t[0][t[1]]),void 0===r||void 0===n||(i=async function(e,t){var i;return null==(i=r)?void 0:i.call(n,e,t)},Object.defineProperty(i,"__ee__",{value:r})),i}})||W)||W)||W)||W)||W;class IntegrationStoppedExecutionException extends Error{constructor(e){super(),this.integration=e}getIntegration(){return this.integration}}class IntegrationLifecycleEvent extends event_Event{constructor(e,t){super(),this.adSet=e,this.integration=t}getAdSet(){return this.adSet}getIntegration(){return this.integration}}var G;let Y=M()(G=function(e,t){return B("Integration")(e,void 0,0)}(G=function(e,t){return U()(e,void 0,2)}(G=Reflect.metadata("design:type",Function)(G=Reflect.metadata("design:paramtypes",[Array,void 0===K?Object:K,void 0===H?Object:H])(G=Reflect.metadata("design:type",Function)(G=Reflect.metadata("design:paramtypes",[Array,void 0===K?Object:K,void 0===H?Object:H])(G=class IntegrationRunner{constructor(e,t,n){this.integrations=e,this.eventManager=t,this.logger=n}async run(e){for(const r of this.integrations){if(!r.supports(e))continue;const i=await this.eventManager.dispatch(q.INTEGRATION_PRE_RUN,new IntegrationLifecycleEvent(e,r));if(!i.isPropagationStopped())try{await i.getIntegration().run(e),await this.eventManager.dispatch(q.INTEGRATION_POST_RUN,new IntegrationLifecycleEvent(e,r))}catch(n){var t;throw null==(t=this.logger)||t.error(`Integration ${i.getIntegration().constructor.name} failed to run`,n),n}}}})||G)||G)||G)||G)||G)||G)||G,X=function(e){return e[e.LHK=0]="LHK",e[e.DMD=1]="DMD",e}({}),Q=function(e){return e[e.GENERAL=0]="GENERAL",e[e.SWOOP=1]="SWOOP",e}({}),J=function(e){return e[e.INTERNAL=0]="INTERNAL",e[e.EXTERNAL=1]="EXTERNAL",e}({}),ee=function(e){return e[e.NONE=0]="NONE",e[e.DEFAULT=1]="DEFAULT",e[e.CALLBACK_ONLY=2]="CALLBACK_ONLY",e[e.PASSTHROUGH=3]="PASSTHROUGH",e}({}),te=function(e){return e[e.NONE=0]="NONE",e[e.BEFORE_END=1]="BEFORE_END",e[e.AFTER_BEGIN=2]="AFTER_BEGIN",e[e.REPLACE=3]="REPLACE",e}({}),ne=function(e){return e[e.AUTO=1]="AUTO",e[e.LEADERBOARD=2]="LEADERBOARD",e[e.LARGE_LEADERBOARD=3]="LARGE_LEADERBOARD",e[e.XL_LEADERBOARD=4]="XL_LEADERBOARD",e[e.TV_SPOT_LEADERBOARD=5]="TV_SPOT_LEADERBOARD",e[e.BILLBOARD=6]="BILLBOARD",e[e.WIDE_SKYSCRAPER=7]="WIDE_SKYSCRAPER",e[e.SKYSCRAPER=8]="SKYSCRAPER",e[e.HALF_PAGE_SKYSCRAPER=9]="HALF_PAGE_SKYSCRAPER",e[e.MEDIUM_RECTANGLE=10]="MEDIUM_RECTANGLE",e[e.SQUARE_RECTANGLE=11]="SQUARE_RECTANGLE",e[e.HALF_PAGE_RECTANGLE=12]="HALF_PAGE_RECTANGLE",e[e.XL_RECTANGLE=13]="XL_RECTANGLE",e[e.MEDIUM_SPLASH=14]="MEDIUM_SPLASH",e[e.SMALL_SPLASH=15]="SMALL_SPLASH",e[e.SMARTPHONE_BANNER=16]="SMARTPHONE_BANNER",e[e.SUPER_LEADERBOARD=17]="SUPER_LEADERBOARD",e[e.PORTRAIT=18]="PORTRAIT",e[e.MOBILEPHONEINTERSTITIAL1=19]="MOBILEPHONEINTERSTITIAL1",e[e.MOBILEPHONEINTERSTITIAL2=20]="MOBILEPHONEINTERSTITIAL2",e[e.MOBILEPHONEINTERSTITIAL3=21]="MOBILEPHONEINTERSTITIAL3",e[e.FEATURE_PHONE_SMALL_BANNER=22]="FEATURE_PHONE_SMALL_BANNER",e[e.FEATURE_PHONE_MEDIUM_BANNER=23]="FEATURE_PHONE_MEDIUM_BANNER",e[e.FEATURE_PHONE_LARGE_BANNER=24]="FEATURE_PHONE_LARGE_BANNER",e}({}),re=function(e){return e[e.GEO=0]="GEO",e[e.NPI=1]="NPI",e[e.IP=2]="IP",e}({}),ie=function(e){return e[e.AD_SLOT_ITEM_CLICK=0]="AD_SLOT_ITEM_CLICK",e[e.AD_SLOT_ITEM_LOAD=1]="AD_SLOT_ITEM_LOAD",e[e.AD_SLOT_ITEM_IMPRESSION=2]="AD_SLOT_ITEM_IMPRESSION",e[e.AD_SLOT_VIEW=3]="AD_SLOT_VIEW",e[e.AD_SLOT_NO_ITEMS=4]="AD_SLOT_NO_ITEMS",e[e.AD_SET_LOAD=5]="AD_SET_LOAD",e[e.AD_SLOT_LOAD=6]="AD_SLOT_LOAD",e}({});class Npi{constructor(){this.encryptedNumber=void 0,this.source=void 0,this.destination=Q.GENERAL}getEncryptedNumber(){var e;return null!=(e=this.encryptedNumber)?e:null}setEncryptedNumber(e){return this.encryptedNumber=e,this}getSource(){var e;return null!=(e=this.source)?e:null}setSource(e){return this.source=e,this}getDestination(){return this.destination}setDestination(e){return this.destination=e,this}}var oe;let se=M()(oe=class UserContext{constructor(){this.npis=[]}getNpis(){return[...this.npis]}addNpi(e){return this.npis.push(e),this}hasNpi(){return this.npis.length>0}})||oe;class NpiPreDetectEvent extends event_Event{constructor(e,t){super(),this.adSet=e,this.source=t}getAdSet(){return this.adSet}getSource(){return this.source}}class NpiPostDetectEvent extends NpiPreDetectEvent{constructor(e,t,n){super(t,n),this.npi=e,this.adSet=t,this.source=n}getNpi(){return this.npi}}var ae;let ce=M()(ae=function(e,t){return B("NpiSource")(e,void 0,0)}(ae=function(e,t){return U()(e,void 0,3)}(ae=Reflect.metadata("design:type",Function)(ae=Reflect.metadata("design:paramtypes",[Array,void 0===se?Object:se,void 0===K?Object:K,void 0===H?Object:H])(ae=Reflect.metadata("design:type",Function)(ae=Reflect.metadata("design:paramtypes",[Array,void 0===se?Object:se,void 0===K?Object:K,void 0===H?Object:H])(ae=class NpiDetector{constructor(e,t,n,r){this.sources=e,this.userContext=t,this.eventManager=n,this.logger=r}async detect(e){if(e.getSettings().isNpiDetectionEnabled())for(const t of this.sources){if(!t.supports(e))continue;const n=await this.eventManager.dispatch(q.NPI_PRE_DETECT,new NpiPreDetectEvent(e,t));if(n.isPropagationStopped())continue;const r=await n.getSource().detect(e);for(const i of r){if(!i.encryptedNumber)continue;const n=(new Npi).setEncryptedNumber(i.encryptedNumber).setSource(t.getType()).setDestination(i.destination),r=await this.eventManager.dispatch(q.NPI_POST_DETECT,new NpiPostDetectEvent(n,e,t));this.userContext.addNpi(r.getNpi())}}}})||ae)||ae)||ae)||ae)||ae)||ae)||ae;function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}var le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};const de="object"===("undefined"==typeof window?"undefined":le(window))&&"object"===("undefined"==typeof document?"undefined":le(document))&&9===document.nodeType;function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function he(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,he(r.key),r)}}function ge(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function ye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ve(e,t)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var be={}.constructor;function _e(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(_e);if(e.constructor!==be)return e;var t={};for(var n in e)t[n]=_e(e[n]);return t}function we(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=_e(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var Se=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Ae=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=Se(e[n]," ");else t=Se(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Ee(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Re(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Oe(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,s=t.fallbacks;!1===n.format&&(o=-1/0);var a=Ee(n),c=a.linebreak,u=a.space;if(e&&o++,s)if(Array.isArray(s))for(var l=0;l<s.length;l++){var d=s[l];for(var p in d){var h=d[p];null!=h&&(r&&(r+=c),r+=Re(p+":"+u+Ae(h)+";",o))}}else for(var f in s){var g=s[f];null!=g&&(r&&(r+=c),r+=Re(f+":"+u+Ae(g)+";",o))}for(var v in t){var y=t[v];null!=y&&"fallbacks"!==v&&(r&&(r+=c),r+=Re(v+":"+u+Ae(y)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+c+r+c),Re(""+e+u+"{"+r,--o)+Re("}",o)):r}var xe=/([[\].#*$><+~=|^:(),"'`\s])/g,Te="undefined"!=typeof CSS&&CSS.escape,Ce=function(e){return Te?Te(e):e.replace(xe,"\\$1")},Ie=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,s=e in this.style;if(o&&!s&&!r)return this;var a=o&&s;if(a?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return a?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var c=this.options.sheet;return c&&c.attached,this},e}(),Pe=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=r.selector,s=r.scoped,a=r.sheet,c=r.generateId;return o?i.selectorText=o:!1!==s&&(i.id=c(me(me(i)),a),i.selectorText="."+Ce(i.id)),i}ye(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Ae(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?ue({},e,{allowEmpty:!0}):e;return Oe(this.selectorText,this.style,n)},ge(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(Ie),Ne={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Pe(e,t,n)}},je={indent:1,children:!0},ke=/@([\w-]+)/,Ze=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(ke);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new it(ue({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=je);var t=Ee(e).linebreak;if(null==e.indent&&(e.indent=je.indent),null==e.children&&(e.children=je.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),Le=/@container|@media|@supports\s+/,De={onCreateRule:function(e,t,n){return Le.test(e)?new Ze(e,t,n):null}},Me={indent:1,children:!0},Fe=/@keyframes\s+([\w-]+)/,Ue=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(Fe);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,s=n.generateId;for(var a in this.id=!1===i?this.name:Ce(s(this,o)),this.rules=new it(ue({},n,{parent:this})),t)this.rules.add(a,t[a],ue({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=Me);var t=Ee(e).linebreak;if(null==e.indent&&(e.indent=Me.indent),null==e.children&&(e.children=Me.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),Be=/@keyframes\s+/,Ve=/\$([\w-]+)/g,$e=function(e,t){return"string"==typeof e?e.replace(Ve,(function(e,n){return n in t?t[n]:e})):e},qe=function(e,t,n){var r=e[t],i=$e(r,n);i!==r&&(e[t]=i)},ze={onCreateRule:function(e,t,n){return"string"==typeof e&&Be.test(e)?new Ue(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&qe(e,"animation-name",n.keyframes),"animation"in e&&qe(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return $e(e,r.keyframes);default:return e}}},He=function(e){function t(){return e.apply(this,arguments)||this}return ye(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?ue({},e,{allowEmpty:!0}):e;return Oe(this.key,this.style,n)},t}(Ie),We={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new He(e,t,n):null}},Ke=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Ee(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=Oe(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return Oe(this.at,this.style,e)},e}(),Ge=/@font-face/,Ye={onCreateRule:function(e,t,n){return Ge.test(e)?new Ke(e,t,n):null}},Xe=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Oe(this.key,this.style,e)},e}(),Qe={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new Xe(e,t,n):null}},Je=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),et={"@charset":!0,"@import":!0,"@namespace":!0},tt=[Ne,De,ze,We,Ye,Qe,{onCreateRule:function(e,t,n){return e in et?new Je(e,t,n):null}}],nt={process:!0},rt={force:!0,process:!0},it=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,s=r.jss,a=r.Renderer,c=r.generateId,u=r.scoped,l=ue({classes:this.classes,parent:i,sheet:o,jss:s,Renderer:a,generateId:c,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},n),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(l.selector="."+Ce(this.classes[d]));var p=we(d,t,l);if(!p)return null;this.register(p);var h=void 0===l.index?this.index.length:l.index;return this.index.splice(h,0,p),p},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=ue({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Pe?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Ue&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Pe?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Ue&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=nt);var i=this.options,o=i.jss.plugins,s=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var a=t.style;if(o.onUpdate(n,t,s,r),r.process&&a&&a!==t.style){for(var c in o.onProcessStyle(t.style,t,s),t.style){var u=t.style[c];u!==a[c]&&t.prop(c,u,rt)}for(var l in a){var d=t.style[l],p=a[l];null==d&&d!==p&&t.prop(l,null,rt)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=Ee(e).linebreak,o=0;o<this.index.length;o++){var s=this.index[o].toString(e);(s||r)&&(t&&(t+=i),t+=s)}return t},e}(),ot=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=ue({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new it(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),st=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),at=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,["attached"]),i=Ee(r).linebreak,o="",s=0;s<this.registry.length;s++){var a=this.registry[s];null!=n&&a.attached!==n||(o&&(o+=i),o+=a.toString(r))}return o},ge(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ct=new at,ut="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),lt="2f1acc6c3a606b082e5eef5e54414ffb";null==ut[lt]&&(ut[lt]=0);var dt=ut[lt]++,pt=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+dt+i+t:o+n.key+"-"+dt+(i?"-"+i:"")+"-"+t}},ht=function(e){var t;return function(){return t||(t=e()),t}},ft=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},gt=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Ae(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var i=r?r.indexOf("!important"):-1,o=i>-1?r.substr(0,i-1):r;e.style.setProperty(t,o,i>-1?"important":"")}}catch(s){return!1}return!0},vt=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},yt=function(e,t){return e.selectorText=t,e.selectorText===t},mt=ht((function(){return document.querySelector("head")}));function bt(e){var t=ct.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"==typeof r){var i=function(e){for(var t=mt(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var _t=ht((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),wt=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},St=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},At=function(){function e(e){this.getPropertyValue=ft,this.setProperty=gt,this.removeProperty=vt,this.setSelector=yt,this.hasInsertedRules=!1,this.cssRules=[],e&&ct.add(e),this.sheet=e;var t,n=this.sheet?this.sheet.options:{},r=n.media,i=n.meta,o=n.element;this.element=o||((t=document.createElement("style")).textContent="\n",t),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),i&&this.element.setAttribute("data-meta",i);var s=_t();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=bt(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"==typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else mt().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=St(n,t);if(!1===(i=wt(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var s=e.toString();if(!s)return!1;var a=St(n,t),c=wt(n,s,a);return!1!==c&&(this.hasInsertedRules=!0,this.refCssRule(e,a,c),c)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof ot&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Et=0,Rt=function(){function e(e){this.id=Et++,this.version="10.10.0",this.plugins=new st,this.options={id:{minify:!1},createGenerateId:pt,Renderer:de?At:null,plugins:[]},this.generateId=pt({minify:!1});for(var t=0;t<tt.length;t++)this.plugins.use(tt[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=ue({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===ct.index?0:ct.index+1);var r=new ot(e,ue({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),ct.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var r=ue({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=we(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Ot=function(e){return new Rt(e)};"object"==typeof CSS&&null!=CSS&&CSS;Ot();var xt=/[A-Z]/g,Tt=/^ms-/,Ct={};function It(e){return"-"+e.toLowerCase()}const Pt=function(e){if(Ct.hasOwnProperty(e))return Ct[e];var t=e.replace(xt,It);return Ct[e]=Tt.test(t)?"-"+t:t};function Nt(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:Pt(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Nt):t.fallbacks=Nt(e.fallbacks)),t}const jt=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Nt(e[t]);return e}return Nt(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=Pt(t);return t===r?e:(n.prop(r,e),null)}}};function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}var Zt=/\s*,\s*/g,Lt=/&/g,Dt=/\$([\w-]+)/g;const Mt=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(Zt),r=e.split(Zt),i="",o=0;o<n.length;o++)for(var s=n[o],a=0;a<r.length;a++){var c=r[a];i&&(i+=", "),i+=-1!==c.indexOf("&")?c.replace(Lt,s):s+" "+c}return i}function n(e,t,n){if(n)return kt({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=kt({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var s,a,c=i,u=c.options.parent;for(var l in r){var d=-1!==l.indexOf("&"),p="@"===l[0];if(d||p){if(s=n(c,u,s),d){var h=t(l,c.selector);a||(a=e(u,o)),h=h.replace(Dt,a);var f=c.key+"-"+l;"replaceRule"in u?u.replaceRule(f,r[l],kt({},s,{selector:h})):u.addRule(f,r[l],kt({},s,{selector:h}))}else p&&u.addRule(l,{},s).addRule(c.key,r[l],{selector:c.selector});delete r[l]}}return r}}};var Ft=Date.now(),Ut="fnValues"+Ft,Bt="fnStyle"+ ++Ft;const Vt=function(){return{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var r=we(e,{},n);return r[Bt]=t,r},onProcessStyle:function(e,t){if(Ut in t||Bt in t)return e;var n={};for(var r in e){var i=e[r];"function"==typeof i&&(delete e[r],n[r]=i)}return t[Ut]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[Bt];o&&(i.style=o(e)||{});var s=i[Ut];if(s)for(var a in s)i.prop(a,s[a](e),r)}}};var $t,qt;let zt=M()($t=function(e,t){return F("styles")(e,void 0,0)}($t=Reflect.metadata("design:type",Function)($t=Reflect.metadata("design:paramtypes",["undefined"==typeof Styles?Object:Styles])($t=Reflect.metadata("design:type",Function)($t=Reflect.metadata("design:paramtypes",["undefined"==typeof Styles?Object:Styles])((qt=class StylesheetRenderer{constructor(e){this.jssInstance=void 0,this.stylesheets=void 0,this.styles=e,this.stylesheets=new Map,this.jssInstance=Ot({id:{minify:!0},createGenerateId:()=>()=>`c${((e,t="")=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const i=new Uint8Array(e);return crypto.getRandomValues(i),i.forEach((e=>{r+=n[e%62]})),`${t}${r}`})(StylesheetRenderer.CLASS_NAMES_LENGTH)}`,plugins:[jt(),Vt(),Mt()]})}async render(e){if(!(null==e?void 0:e.getId()))return;const t=this.getStylesheet(e);t.attached||(t.update({format:e.getSettings().getFormat(),style:e.getSettings().getStyle()}),t.attach())}getClasses(e){return this.getStylesheet(e).classes||{}}getClass(e,t){var n;return null!=(n=this.getClasses(e)[t])?n:""}getStylesheet(e){var t;const n=e.getId(),r=null!=(t=this.stylesheets.get(n))?t:this.jssInstance.createStyleSheet(this.styles);return this.stylesheets.set(n,r),r}},qt.CLASS_NAMES_LENGTH=10,$t=qt))||$t)||$t)||$t)||$t)||$t)||$t;var Ht;let Wt=M()(Ht=Reflect.metadata("design:type",Function)(Ht=Reflect.metadata("design:paramtypes",[void 0===$?Object:$])(Ht=Reflect.metadata("design:type",Function)(Ht=Reflect.metadata("design:paramtypes",[void 0===$?Object:$])(Ht=class BrowserObjectModel{constructor(e){this.applicationContext=e}getWindow(){return this.applicationContext.getWindow()}getDocument(){return this.getWindow().document}})||Ht)||Ht)||Ht)||Ht)||Ht;class AdSlotContainerItemViewEvent extends event_Event{constructor(e,t){super(),this.adSlotContainerItem=e,this.element=t}getAdSlotContainerItem(){return this.adSlotContainerItem}getElement(){return this.element}}class ViewObserver{constructor(e){this.elementMap=new Map,this.timeoutsMap=new Map,this.observer=void 0,this.mutationObserver=void 0,this.options=e,this.options=Object.assign({},ViewObserver.DEFAULT_OPTIONS,e),this.observer=new IntersectionObserver(this.handleIntersection.bind(this),this.options),this.mutationObserver=new MutationObserver(this.handleMutations.bind(this))}observe(e,t){if(!e)return;this.elementMap.has(e)&&(this.elementMap.delete(e),this.observer.unobserve(e)),this.elementMap.set(e,Object.assign({},ViewObserver.ELEMENT_DEFAULT_OPTIONS,t)),this.observer.observe(e);const n=e.parentElement;n&&this.mutationObserver.observe(n,{childList:!0,subtree:!1})}unobserve(e){e&&(this.elementMap.delete(e),this.timeoutsMap.delete(e),this.observer.unobserve(e),0===this.elementMap.size&&this.destroy())}destroy(){this.elementMap.clear(),this.timeoutsMap.clear(),this.observer.disconnect(),this.mutationObserver.disconnect()}static getInstance(e){return new ViewObserver(e)}handleIntersection(e){e.filter((e=>this.elementMap.has(e.target))).forEach((e=>{var t;const n=e.target,r=this.elementMap.get(n);if(!r)return;const i=r.threshold,o=r.trackAllChanges,s=null==(t=this.options)?void 0:t.trackVisibility,a=e.isIntersecting&&e.intersectionRatio>=i;let c=a;s&&void 0!==e.isVisible&&(c=e.isVisible&&a);const u="data-isInView",l=!n.hasAttribute(u)||n.hasAttribute(u)&&n.getAttribute(u)!==String(c);(o||!o&&l)&&(this.onVisibilityChange(e.target,{entry:e,isInView:c}),n.setAttribute(u,String(c)))}))}onVisibilityChange(e,t){var n;const r=this.elementMap.get(e);if(!r)return;const{entry:i,isInView:o}=t,s=null!=(n=r.callback)?n:()=>{};if(o){var a;if(this.timeoutsMap.has(e))return;return void this.timeoutsMap.set(e,setTimeout((()=>{Promise.resolve(s(e,o,i)).then((()=>{})),r.freezeOnceVisible&&this.observer.unobserve(e),this.timeoutsMap.delete(e)}),null!=(a=r.minimumVisibleTime)?a:0))}const c=this.timeoutsMap.get(e);clearTimeout(c),this.timeoutsMap.delete(e),Promise.resolve(s(e,o,i)).then((()=>{}))}handleMutations(e){e.forEach((e=>{e.removedNodes.length&&e.removedNodes.forEach((e=>{e instanceof Element&&this.elementMap.has(e)&&this.unobserve(e)}))}))}}var Kt,Gt;ViewObserver.ELEMENT_DEFAULT_OPTIONS={freezeOnceVisible:!1,threshold:.25,trackAllChanges:!1},ViewObserver.DEFAULT_OPTIONS={root:null,rootMargin:"0px",threshold:[...Array(100).fill(null).map(((e,t)=>t/100)),1]};let Yt=M()(Kt=function(e,t){return U()(e,void 0,3)}(Kt=Reflect.metadata("design:type",Function)(Kt=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===K?Object:K,void 0===zt?Object:zt,void 0===H?Object:H])(Kt=Reflect.metadata("design:type",Function)(Kt=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===K?Object:K,void 0===zt?Object:zt,void 0===H?Object:H])((Gt=class AdSlotContainerItemView{constructor(e,t,n,r){this.browserObjectModel=e,this.eventManager=t,this.stylesheetRenderer=n,this.logger=r}async render(e,t){var n,r,i,o,s,a,c,u,l,d,p,h,f,g,v,y,m,b,_,w,S,A=this;const E=null==(n=e.getAdSlotContainer())?void 0:n.getAdSlot();if(!E)throw new Error("AdSlot is required to render AdSlotContainer");const R=this.browserObjectModel.getDocument().createElement("li");R.className=this.stylesheetRenderer.getClass(E,"listitem");const O={default:"",[J.INTERNAL]:null!=(r=null==(i=E.getSettings().getLinkProperties())||null==(i=i.internal)?void 0:i.rel)?r:"",[J.EXTERNAL]:null!=(o=null==(s=E.getSettings().getLinkProperties())||null==(s=s.external)?void 0:s.rel)?o:"sponsored"},x={default:AdSlotContainerItemView.DEFAULT_REFERRER_POLICY,[J.INTERNAL]:null!=(a=null==(c=E.getSettings().getLinkProperties())||null==(c=c.internal)?void 0:c.referrerPolicy)?a:AdSlotContainerItemView.DEFAULT_REFERRER_POLICY,[J.EXTERNAL]:null!=(u=null==(l=E.getSettings().getLinkProperties())||null==(l=l.external)?void 0:l.referrerPolicy)?u:AdSlotContainerItemView.DEFAULT_REFERRER_POLICY},T={default:"_blank",[J.INTERNAL]:null!=(d=null==(p=E.getSettings().getLinkProperties())||null==(p=p.internal)?void 0:p.target)?d:"_self",[J.EXTERNAL]:null!=(h=null==(f=E.getSettings().getLinkProperties())||null==(f=f.external)?void 0:f.target)?h:"_blank"},C=e.getLinkingType(),I=this.browserObjectModel.getDocument().createElement("a");I.href=null!=(g=e.getUrl())?g:"",I.target=T[null!=C?C:"default"],I.rel=O[null!=C?C:"default"],I.referrerPolicy=x[null!=C?C:"default"],I.className=this.stylesheetRenderer.getClass(E,"listItemLink"),I.setAttribute("data-id",e.getId()),I.setAttribute("data-c-id",null!=(v=e.getCampaignId())?v:""),I.setAttribute("data-p-id",null!=(y=e.getPublicationId())?y:""),I.setAttribute("data-linking-type",null!=(m=null==C?void 0:C.toString())?m:"");const P=this.browserObjectModel.getDocument().createElement("span");if(P.className=this.stylesheetRenderer.getClass(E,"listItemTitle"),P.textContent=null!=(b=e.getTitle())?b:"",I.textContent=null!=(_=e.getTitle())?_:"",C===J.EXTERNAL){const e=this.browserObjectModel.getDocument().createElement("span");e.className=this.stylesheetRenderer.getClass(E,"listItemTitleExternalLinkIcon"),e.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n  <g>\r\n    <path\r\n      d="M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11"\r\n      stroke="#a3afc5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r\n  </g>\r\n</svg>\r\n',I.appendChild(e)}R.appendChild(I);const N=this.browserObjectModel.getDocument().createElement("div");N.className=this.stylesheetRenderer.getClass(E,"listItemMeta");const j=e.getSubtitle();if(j&&("string"==typeof j&&j.length>0||"object"==typeof j&&j.content&&j.content.length>0)){const e=this.browserObjectModel.getDocument().createElement("span");if(e.className=this.stylesheetRenderer.getClass(E,"listItemSubtitle"),"string"==typeof j)e.textContent=j;else if("string"===j.type){var k;e.textContent=null!=(k=j.content)?k:""}else if("link"===j.type&&"url"in j){var Z,L,D,M,F,U,B,V;const t=this.browserObjectModel.getDocument().createElement("a");t.href=null!=(Z=j.url)?Z:"",t.textContent=null!=(L=j.content)?L:"",t.target=null!=(D=null==(M=E.getSettings().getLinkProperties())||null==(M=M.subtitle)?void 0:M.target)?D:T.default,t.rel=null!=(F=null==(U=E.getSettings().getLinkProperties())||null==(U=U.subtitle)?void 0:U.rel)?F:O.default,t.referrerPolicy=null!=(B=null==(V=E.getSettings().getLinkProperties())||null==(V=V.subtitle)?void 0:V.referrerPolicy)?B:x.default,e.appendChild(t)}N.appendChild(e)}else{var $,z;const t=["authors",e.getPublicationAbbreviatedName()&&(null!=($=null==(z=e.getPublicationAbbreviatedName())?void 0:z.length)?$:0)>0?"publicationAbbreviatedName":"publicationName","publicationDate"],n=[];for(const r of t){var H;const t=`${r.charAt(0).toUpperCase()}${r.slice(1)}`,i=`get${t}`,o=e[i]?e[i]():"";if(o&&(null!=(H=o.length)?H:0)>0){const e=this.browserObjectModel.getDocument().createElement("span");e.className=this.stylesheetRenderer.getClass(E,`listItem${t}`),e.textContent=o,n.push(e)}}for(let e=0;e<n.length;e++){const t=n[e],r=e===n.length-1;N.appendChild(t),r||N.appendChild(this.browserObjectModel.getDocument().createTextNode(", "))}}return R.appendChild(N),(null!=t?t:ViewObserver.getInstance({trackVisibility:!1,delay:100})).observe(R,{freezeOnceVisible:!0,minimumVisibleTime:null!=(w=null==E?void 0:E.getSettings().getItemImpressionTrackTimeout())?w:0,threshold:null!=(S=null==E?void 0:E.getSettings().getItemImpressionMinimumVisibleThreshold())?S:.25,callback:async function(t,n){n&&await A.eventManager.dispatch(q.AD_SLOT_CONTAINER_ITEM_VIEW,new AdSlotContainerItemViewEvent(e,t))}}),R}},Gt.DEFAULT_REFERRER_POLICY="strict-origin-when-cross-origin, no-referrer-when-downgrade",Kt=Gt))||Kt)||Kt)||Kt)||Kt)||Kt)||Kt;class AdSlotContainerViewEvent extends event_Event{constructor(e,t){super(),this.adSlotContainer=e,this.element=t}getAdSlotContainer(){return this.adSlotContainer}getElement(){return this.element}}var Xt;let Qt=M()(Xt=function(e,t){return U()(e,void 0,4)}(Xt=Reflect.metadata("design:type",Function)(Xt=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===Yt?Object:Yt,void 0===K?Object:K,void 0===zt?Object:zt,void 0===H?Object:H])(Xt=Reflect.metadata("design:type",Function)(Xt=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===Yt?Object:Yt,void 0===K?Object:K,void 0===zt?Object:zt,void 0===H?Object:H])(Xt=class AdSlotContainerView{constructor(e,t,n,r,i){this.browserObjectModel=e,this.adSlotContainerItemView=t,this.eventManager=n,this.stylesheetRenderer=r,this.logger=i}async render(e){var t,n,r,i=this;const o=e.getAdSlot();if(!o)throw new Error("AdSlot is required to render AdSlotContainer");const s=this.browserObjectModel.getDocument().createElement("div");s.setAttribute("data-id",`${o.getId()}-${e.getIndex()}`),s.className=this.stylesheetRenderer.getClass(o,"container");const a=(null!=(t=o.getSettings().getHeadingText())?t:"We recommend").trim(),c=this.browserObjectModel.getDocument().createElement("div");c.className=this.stylesheetRenderer.getClass(o,"heading"),c.textContent=""!==a?a:"We recommend",s.appendChild(c);const u=ViewObserver.getInstance({trackVisibility:!1,delay:100}),l=e.getItems().reduce(((e,t)=>{const n=t.getLinkingType();return null===n||(e[n]||(e[n]=[]),e[n].push(t)),e}),{}),d=this.browserObjectModel.getDocument().createElement("div");d.className=this.stylesheetRenderer.getClass(o,"sections");for(const[p,h]of Object.entries(l)){const e=this.browserObjectModel.getDocument().createElement("div");e.setAttribute("data-section-linking-type",p.toString()),e.className=this.stylesheetRenderer.getClass(o,"section");const t=this.browserObjectModel.getDocument().createElement("ul");t.className=this.stylesheetRenderer.getClass(o,"list");for(const n of h){const e=await this.adSlotContainerItemView.render(n,u);t.appendChild(e)}e.appendChild(t),d.appendChild(e)}return s.appendChild(d),s.appendChild(this.getFooterElement(o)),u.observe(s,{freezeOnceVisible:!0,minimumVisibleTime:null!=(n=null==o?void 0:o.getSettings().getImpressionTrackTimeout())?n:0,threshold:null!=(r=null==o?void 0:o.getSettings().getImpressionMinimumVisibleThreshold())?r:.01,callback:async function(t,n){n&&await i.eventManager.dispatch(q.AD_SLOT_CONTAINER_VIEW,new AdSlotContainerViewEvent(e,t))}}),s}getFooterElement(e){var t,n,r,i,o,s,a,c;const u=this.browserObjectModel.getDocument().createElement("span");u.className=this.stylesheetRenderer.getClass(e,"footerlogo"),u.innerHTML='<svg viewBox="0 0 234 57" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <path\n    d="M227.7,56.9 L149.7,56.9 C146.7,56.9 143.7,53.8 143.7,50.9 L143.7,6.9 C143.7,4 146.7,0.9 149.7,0.9 L227.7,0.9 C230.7,0.9 233.7,4 233.7,6.9 L233.7,50.9 C233.7,53.9 230.6,56.9 227.7,56.9 L227.7,56.9 Z"\n    class="shape0" fill="#a3afc5"></path>\n  <g transform="translate(0.000000, 14.000000)" fill="#a3afc5" class="text">\n    <path d="M15.8,5.9 L15.8,29.6 L9.2,29.6 L9.2,5.9 L0.9,5.9 L0.9,0.2 L24.1,0.2 L24.1,5.9 L15.8,5.9 L15.8,5.9 Z"\n          class="shape1"></path>\n    <path\n      d="M50.2,10 C50.2,14.7 48.3,17.7 44.6,19.1 L52,29.6 L44,29.6 L37.5,20.2 L33,20.2 L33,29.6 L26.4,29.6 L26.4,0.2 L37.5,0.2 C42.1,0.2 45.3,1 47.3,2.5 C49.2,4.1 50.2,6.6 50.2,10 L50.2,10 Z M42.3,13.5 C43.1,12.8 43.5,11.6 43.5,10 C43.5,8.4 43.1,7.3 42.2,6.7 C41.4,6.1 39.9,5.8 37.8,5.8 L32.9,5.8 L32.9,14.5 L37.7,14.5 C40,14.6 41.5,14.2 42.3,13.5 L42.3,13.5 Z"\n      class="shape2"></path>\n    <path\n      d="M75.6,0.3 L75.6,6.1 L61,6.1 L61,12.1 L74.1,12.1 L74.1,17.7 L61,17.7 L61,23.8 L76,23.8 L76,29.6 L54.4,29.6 L54.4,0.2 L75.6,0.2 L75.6,0.3 Z"\n      class="shape3"></path>\n    <path\n      d="M99.9,0.3 L106.5,0.3 L106.5,29.7 L99.9,29.7 L85.9,11.3 L85.9,29.7 L79.3,29.7 L79.3,0.3 L85.4,0.3 L99.8,19.2 L99.8,0.3 L99.9,0.3 Z"\n      class="shape4"></path>\n    <path\n      d="M133.6,4.1 C136.4,6.7 137.8,10.2 137.8,14.8 C137.8,19.4 136.4,23 133.7,25.6 C131,28.3 126.8,29.6 121.2,29.6 L111.2,29.6 L111.2,0.2 L121.6,0.2 C126.7,0.3 130.8,1.5 133.6,4.1 L133.6,4.1 Z M128.8,21.6 C130.4,20.1 131.2,17.9 131.2,15 C131.2,12.1 130.4,9.9 128.8,8.3 C127.2,6.7 124.7,6 121.4,6 L117.7,6 L117.7,23.9 L121.9,23.9 C124.8,23.8 127.1,23.1 128.8,21.6 L128.8,21.6 Z"\n      class="shape5"></path>\n  </g>\n  <g transform="translate(156.000000, 14.000000)" fill="#FFFFFF">\n    <path\n      d="M26.9,11.1 L19,27.1 L15,27.1 L7.1,11.1 L7.1,29.6 L0.5,29.6 L0.5,0.2 L9.4,0.2 L17,16.3 L24.6,0.2 L33.4,0.2 L33.4,29.6 L26.8,29.6 L26.8,11.1 L26.9,11.1 Z"\n      class="shape6"></path>\n    <path\n      d="M60.6,4.1 C63.4,6.7 64.8,10.2 64.8,14.8 C64.8,19.4 63.4,23 60.7,25.6 C58,28.3 53.8,29.6 48.2,29.6 L38.2,29.6 L38.2,0.2 L48.6,0.2 C53.7,0.3 57.8,1.5 60.6,4.1 L60.6,4.1 Z M55.8,21.6 C57.4,20.1 58.2,17.9 58.2,15 C58.2,12.1 57.4,9.9 55.8,8.3 C54.2,6.7 51.7,6 48.4,6 L44.7,6 L44.7,23.9 L48.9,23.9 C51.8,23.8 54.1,23.1 55.8,21.6 L55.8,21.6 Z"\n      class="shape7"></path>\n  </g>\n</svg>\n';const l=this.browserObjectModel.getDocument().createElement("a");l.href=null!=(t=null==(n=e.getSettings().getLinkProperties())||null==(n=n.brand)?void 0:n.href)?t:"https://www.trendmd.com/how-it-works-readers",l.target=null!=(r=null==(i=e.getSettings().getLinkProperties())||null==(i=i.brand)?void 0:i.target)?r:"_blank",l.rel=null!=(o=null==(s=e.getSettings().getLinkProperties())||null==(s=s.brand)?void 0:s.rel)?o:"",l.referrerPolicy=null!=(a=null==(c=e.getSettings().getLinkProperties())||null==(c=c.brand)?void 0:c.referrerPolicy)?a:"",l.insertAdjacentHTML("beforeend","<span>Powered by</span>"),l.appendChild(u);const d=this.browserObjectModel.getDocument().createElement("div");d.className=this.stylesheetRenderer.getClass(e,"footerleft"),d.appendChild(l);const p=this.browserObjectModel.getDocument().createElement("div");p.className=this.stylesheetRenderer.getClass(e,"footerright");const h=this.getSettingsElement(e);p.appendChild(h);const f=this.browserObjectModel.getDocument().createElement("div");return f.className=this.stylesheetRenderer.getClass(e,"footer"),f.appendChild(d),f.appendChild(p),f}getSettingsElement(e){var t,n,r,i,o,s,a,c,u,l,d,p,h,f,g,v,y;const m=this.browserObjectModel.getDocument().createElement("div");m.className=this.stylesheetRenderer.getClass(e,"footersettings");const b=this.browserObjectModel.getDocument().createElement("span");b.className=this.stylesheetRenderer.getClass(e,"footercog"),b.innerHTML='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g>\n    <path\n      d="M20 12c0-.568-.06-1.122-.174-1.656l1.834-1.612-2-3.464-2.322.786c-.82-.736-1.787-1.308-2.86-1.657L14 2h-4l-.48 2.396c-1.07.35-2.04.92-2.858 1.657L4.34 5.268l-2 3.464 1.834 1.612C4.06 10.878 4 11.432 4 12s.06 1.122.174 1.656L2.34 15.268l2 3.464 2.322-.786c.82.736 1.787 1.308 2.86 1.657L10 22h4l.48-2.396c1.07-.35 2.038-.92 2.858-1.657l2.322.786 2-3.464-1.834-1.613c.113-.535.174-1.09.174-1.657zm-8 4c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"\n      fill="#a3afc5"></path>\n  </g>\n</svg>\n',m.appendChild(b);const _=[],w=this.browserObjectModel.getDocument().createElement("a");w.href=null!=(t=null!=(n=e.getSettings().getPrivacyPolicyUrl())?n:null==(r=e.getSettings().getLinkProperties())||null==(r=r.privacyPolicy)?void 0:r.href)?t:"https://www.trendmd.com/privacy",w.target=null!=(i=null==(o=e.getSettings().getLinkProperties())||null==(o=o.privacyPolicy)?void 0:o.target)?i:"_blank",w.rel=null!=(s=null==(a=e.getSettings().getLinkProperties())||null==(a=a.privacyPolicy)?void 0:a.rel)?s:"",w.referrerPolicy=null!=(c=null==(u=e.getSettings().getLinkProperties())||null==(u=u.privacyPolicy)?void 0:u.referrerPolicy)?c:"",w.textContent="Privacy policy",w.className=this.stylesheetRenderer.getClass(e,"footersettingslinkprivacypolicy"),_.push(w);const S=this.browserObjectModel.getDocument().createElement("a");S.href=null!=(l=null==(d=e.getSettings().getLinkProperties())||null==(d=d.analytics)?void 0:d.href)?l:"https://www.trendmd.com/google-analytics",S.target=null!=(p=null==(h=e.getSettings().getLinkProperties())||null==(h=h.analytics)?void 0:h.target)?p:"_blank",S.rel=null!=(f=null==(g=e.getSettings().getLinkProperties())||null==(g=g.analytics)?void 0:g.rel)?f:"",S.referrerPolicy=null!=(v=null==(y=e.getSettings().getLinkProperties())||null==(y=y.analytics)?void 0:y.referrerPolicy)?v:"",S.textContent="Google Analytics settings",S.className=this.stylesheetRenderer.getClass(e,"footersettingslinkanalytics"),_.push(S);const A=this.browserObjectModel.getDocument().createElement("ul");for(const R of _){const e=this.browserObjectModel.getDocument().createElement("li");e.appendChild(R),A.appendChild(e)}const E=this.browserObjectModel.getDocument().createElement("div");return E.className=this.stylesheetRenderer.getClass(e,"footersettingsmodal"),E.appendChild(A),m.appendChild(E),m}})||Xt)||Xt)||Xt)||Xt)||Xt)||Xt;class AdSlotContainerLifecycleEvent extends event_Event{constructor(e){super(),this.adSlotContainer=e}getAdSlotContainer(){return this.adSlotContainer}}class AdSlotContainerPreRenderEvent extends AdSlotContainerLifecycleEvent{constructor(...e){super(...e),this.items=[]}getItems(){return this.items}setItems(e){this.items=e}}class BackendEvent extends event_Event{constructor(e,t,n){super(),this.adSlotIdentifier=e,this.type=t,this.payload=n}getAdSlotIdentifier(){return this.adSlotIdentifier}getType(){return this.type}getPayload(){return this.payload}}var Jt;let en=M()(Jt=Reflect.metadata("design:type",Function)(Jt=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===Qt?Object:Qt,void 0===zt?Object:zt])(Jt=Reflect.metadata("design:type",Function)(Jt=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===Qt?Object:Qt,void 0===zt?Object:zt])(Jt=class AdSlotContainerRenderer{constructor(e,t,n){this.eventManager=e,this.adSlotContainerView=t,this.stylesheetRenderer=n}async render(e){if(!e||e.isRendered())return;const t=e.getAdSlot();if(!t)return;if((await this.eventManager.dispatch(q.AD_SLOT_CONTAINER_PRE_RENDER,new AdSlotContainerPreRenderEvent(e))).isPropagationStopped())return;0===e.getItems().length&&await this.eventManager.dispatch(q.BACKEND_EVENT,new BackendEvent(t.getId(),ie.AD_SLOT_NO_ITEMS));const n=e.getElement();n&&0!==e.getItems().length?(n.className=this.stylesheetRenderer.getClass(t,"outerContainer"),n.appendChild(await this.adSlotContainerView.render(e)),e.setIsRendered(!0),await this.eventManager.dispatch(q.AD_SLOT_CONTAINER_POST_RENDER,new AdSlotContainerLifecycleEvent(e))):await this.eventManager.dispatch(q.AD_SLOT_CONTAINER_POST_RENDER,new AdSlotContainerLifecycleEvent(e))}})||Jt)||Jt)||Jt)||Jt)||Jt;class AdSlotLifecycleEvent extends event_Event{constructor(e){super(),this.render=!0,this.adSlot=e}getAdSlot(){return this.adSlot}}class AdSlotContainer{constructor(){this.adSlot=void 0,this.element=void 0,this.rendered=!1,this.index=0,this.items=new Map}getElement(){var e;return null!=(e=this.element)?e:null}setElement(e){return this.element=e,this}getIndex(){return this.index}setIndex(e){return this.index=e,this}getAdSlot(){var e;return null!=(e=this.adSlot)?e:null}setAdSlot(e){return this.adSlot=e,this}isRendered(){return this.rendered}setIsRendered(e){return this.rendered=e,this.element&&(this.element.dataset.index=this.index.toString(),this.element.dataset.rendered=e?"true":"false",delete this.element.dataset.rendering),this}getItems(){return[...this.items.values()]}setItems(e){for(const t of e)this.addItem(t);return this}addItem(e){return this.items.has(e.getId())||(this.items.set(e.getId(),e),e.setAdSlotContainer(this)),this}removeItem(e){return this.hasItem(e)?(this.items.delete(e.getId())&&e.getAdSlotContainer()===this&&e.setAdSlotContainer(void 0),this):this}hasItem(e){return this.items.has(e.getId())}hasItems(){return this.items.size>0}}var tn;let nn=M()(tn=class AdSlotContainerResolver{async resolve(e,t){if(!e.getSettings().getDatasetId())throw new Error("Dataset ID is not defined");const n=[];for(const r of t){if(r.getAttributeNames().includes("rendered")&&"true"===r.getAttribute("data-rendered"))continue;const e=new AdSlotContainer;e.setElement(r),n.push(e)}return n}})||tn;var rn;let on=M()(rn=class Validator{validate(e){return!0}})||rn;var sn;let an=M()(sn=function(e,t){return B("AdSlotConstraintValidator")(e,void 0,0)}(sn=Reflect.metadata("design:type",Function)(sn=Reflect.metadata("design:paramtypes",[Array])(sn=Reflect.metadata("design:type",Function)(sn=Reflect.metadata("design:paramtypes",[Array])(sn=class AdSlotRenderValidator extends on{constructor(e){super(),this.adSlotConstraintValidators=e}validate(e){return!!e.getId()&&(!!super.validate(e)&&e.getConstraints().every((e=>this.adSlotConstraintValidators.filter((t=>t.supports(e))).every((t=>t.validate(e))))))}})||sn)||sn)||sn)||sn)||sn)||sn;var cn;let un=M()(cn=function(e,t){return U()(e,void 0,6)}(cn=Reflect.metadata("design:type",Function)(cn=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===nn?Object:nn,void 0===an?Object:an,void 0===en?Object:en,void 0===zt?Object:zt,void 0===Wt?Object:Wt,void 0===H?Object:H])(cn=Reflect.metadata("design:type",Function)(cn=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===nn?Object:nn,void 0===an?Object:an,void 0===en?Object:en,void 0===zt?Object:zt,void 0===Wt?Object:Wt,void 0===H?Object:H])(cn=class AdSlotRenderer{constructor(e,t,n,r,i,o,s){this.mutationObservers=new Map,this.observedElements=new Set,this.eventManager=e,this.adSlotContainerResolver=t,this.adSlotRenderValidator=n,this.adSlotContainerRenderer=r,this.stylesheetRenderer=i,this.browserObjectModel=o,this.logger=s}async render(e){var t=this;if(!e)return;const n=await this.eventManager.dispatch(q.AD_SLOT_PRE_RENDER,new AdSlotLifecycleEvent(e));if(!this.adSlotRenderValidator.validate(e)||n.isPropagationStopped())return;const r=e.getSettings().getDatasetId();var i;if(!r)return void(null==(i=this.logger)||i.error("Dataset ID is not defined"));await this.stylesheetRenderer.render(e);const o=[];if(this.browserObjectModel.getDocument().querySelectorAll(`ins[data-${r}="${e.getId()}"]`).forEach((e=>o.push(e))),await this.renderContainers(e,o),await this.eventManager.dispatch(q.AD_SLOT_POST_RENDER,new AdSlotLifecycleEvent(e)),this.mutationObservers.has(e.getId()))return;const s=new MutationObserver((n=>{n.forEach((n=>{n.addedNodes.length>0&&n.addedNodes.forEach((async function(n){if(n instanceof Element){var i;if("ins"!==n.tagName.toLowerCase()||!n.hasAttribute(`data-${r}`)||n.getAttribute(`data-${r}`)!==e.getId()||n.hasAttribute("data-rendered")&&"true"===n.getAttribute("data-rendered")||n.hasAttribute("data-rendering")&&"true"===n.getAttribute("data-rendering")||n.childElementCount>0||t.observedElements.has(n))return void(null==(i=t.logger)||i.debug("Skipping node",n));t.observedElements.add(n),n.setAttribute("data-rendering","true"),await t.renderContainers(e,[n])}}))}))}));s.observe(document.body,{childList:!0,subtree:!0}),this.mutationObservers.set(e.getId(),s)}async renderContainers(e,t){const n=await this.adSlotContainerResolver.resolve(e,t);for(const r of n)e.addContainer(r),await this.adSlotContainerRenderer.render(r)}})||cn)||cn)||cn)||cn)||cn)||cn;class AdSetLifecycleEvent extends event_Event{constructor(e){super(),this.render=!0,this.adSet=e}getAdSet(){return this.adSet}}var ln;let dn=M()(ln=Reflect.metadata("design:type",Function)(ln=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===un?Object:un])(ln=Reflect.metadata("design:type",Function)(ln=Reflect.metadata("design:paramtypes",[void 0===K?Object:K,void 0===un?Object:un])(ln=class AdSetRenderer{constructor(e,t){this.eventManager=e,this.adSlotRenderer=t}async render(e){if(!e)return;const t=await this.eventManager.dispatch(q.AD_SET_PRE_RENDER,new AdSetLifecycleEvent(e));if(!t.isPropagationStopped()){for(const e of t.getAdSet().getAdSlots())await this.adSlotRenderer.render(e);await this.eventManager.dispatch(q.AD_SET_POST_RENDER,new AdSetLifecycleEvent(e))}}})||ln)||ln)||ln)||ln)||ln;class AdSlot{constructor(){this.id=void 0,this.adSet=void 0,this.settings=void 0,this.containers=new Set,this.constraints=new Set}getId(){if(!this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getAdSet(){var e;return null!=(e=this.adSet)?e:null}setAdSet(e){return this.adSet=e,this}getContainers(){return[...this.containers.values()]}addContainer(e){return this.containers.has(e)||(this.containers.add(e),e.setAdSlot(this),e.setIndex(this.containers.size-1)),this}removeContainer(e){return this.hasContainer(e)?(this.containers.delete(e)&&e.getAdSlot()===this&&e.setAdSlot(void 0),this):this}hasContainer(e){return this.containers.has(e)}getSettings(){if(!this.settings)throw new Error(`Attempt to access "settings" of ${this.constructor.name} before initialization`);return this.settings}setSettings(e){return this.settings=e,e.setAdSlot(this),this}getConstraints(){return[...this.constraints]}addConstraint(e){return this.constraints.has(e)||(this.constraints.add(e),e.setAdSlot(this)),this}removeConstraint(e){return this.hasConstraint(e)?(this.constraints.delete(e)&&e.getAdSlot()===this&&e.setAdSlot(void 0),this):this}hasConstraint(e){return this.constraints.has(e)}}class AdSlotConstraint{constructor(){this.adSlot=void 0,this.type=void 0,this.constraint=void 0}getAdSlot(){var e;return null!=(e=this.adSlot)?e:null}setAdSlot(e){return this.adSlot=e,this}getType(){var e;return null!=(e=this.type)?e:null}getConstraint(){var e;return null!=(e=this.constraint)?e:null}}class AdSlotSettings{constructor(){this.adSlot=void 0,this.positionSelector=void 0,this.maxNumberOfColumns=void 0,this.format=void 0,this.datasetId=void 0,this.impressionTrackTimeout=void 0,this.itemImpressionTrackTimeout=void 0,this.impressionMinimumVisibleThreshold=void 0,this.itemImpressionMinimumVisibleThreshold=void 0,this.headingText=void 0,this.style=void 0,this.privacyPolicyUrl=void 0,this.linkProperties=void 0}getAdSlot(){var e;return null!=(e=this.adSlot)?e:null}setAdSlot(e){return this.adSlot=e,this}getPositionSelector(){var e;return null!=(e=this.positionSelector)?e:null}getMaxNumberOfColumns(){var e;return null!=(e=this.maxNumberOfColumns)?e:null}getFormat(){var e;return null!=(e=this.format)?e:ne.AUTO}getDatasetId(){var e;return null!=(e=this.datasetId)?e:null}getImpressionTrackTimeout(){var e;return null!=(e=this.impressionTrackTimeout)?e:null}getItemImpressionTrackTimeout(){var e;return null!=(e=this.itemImpressionTrackTimeout)?e:null}getImpressionMinimumVisibleThreshold(){var e;return null!=(e=this.impressionMinimumVisibleThreshold)?e:null}getItemImpressionMinimumVisibleThreshold(){var e;return null!=(e=this.itemImpressionMinimumVisibleThreshold)?e:null}getHeadingText(){var e;return null!=(e=this.headingText)?e:null}getStyle(){var e;return null!=(e=this.style)?e:{}}getPrivacyPolicyUrl(){var e;return null!=(e=this.privacyPolicyUrl)?e:null}getLinkProperties(){var e;return null!=(e=this.linkProperties)?e:{}}}const pn=(e,t)=>{const n=Object.assign({},e);for(const r in t)"object"==typeof t[r]&&null!==t[r]?"object"==typeof n[r]&&null!==n[r]?n[r]=pn(n[r],t[r]):n[r]=Object.assign({},t[r]):n[r]=t[r];return n},hn=(e,t)=>{for(const[n,r]of Object.entries(t)){const t=`set${n.charAt(0).toUpperCase()}${n.slice(1)}`,i=`get${n.charAt(0).toUpperCase()}${n.slice(1)}`,o=e[t],s="function"==typeof o?o:t=>{Object.defineProperty(e,n,{value:t})};(Object.hasOwn(e,n)||"function"==typeof e[i])&&s(r)}};var fn;let gn=M()(fn=Reflect.metadata("design:type",Function)(fn=Reflect.metadata("design:paramtypes",[void 0===$?Object:$])(fn=Reflect.metadata("design:type",Function)(fn=Reflect.metadata("design:paramtypes",[void 0===$?Object:$])(fn=class AdSlotResolver{constructor(e){this.applicationContext=e}async resolve(e){var t,n;const r=new AdSlot;hn(r,{id:e.identifier}),e.settings.datasetId=null!=(t=null!=(n=e.settings.datasetId)?n:this.applicationContext.getApplicationConfig().datasetId)?t:"revops-suggestions";const i=new AdSlotSettings;hn(i,e.settings),r.setSettings(i);for(const o of e.constraints){const e=new AdSlotConstraint;hn(e,o),r.addConstraint(e)}return r}})||fn)||fn)||fn)||fn)||fn;class EventQueue{constructor(e){this.queue=new Set,this.options={maxQueueSize:10,timeout:5e3,callback:()=>{}},this.timer=null,this.options=Object.assign({},this.options,e)}push(e){this.queue.add(e),1===this.queue.size&&(this.timer=setTimeout((()=>{this.fireEvent()}),this.options.timeout)),this.queue.size>=this.options.maxQueueSize&&this.fireEvent()}getItems(){return[...this.queue]}fireEvent(){this.options.callback(this.getItems()),this.queue.clear(),this.timer&&(clearTimeout(this.timer),this.timer=null)}}var vn,yn;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(vn||(vn={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(yn||(yn={}));const mn=vn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bn=e=>{switch(typeof e){case"undefined":return mn.undefined;case"string":return mn.string;case"number":return isNaN(e)?mn.nan:mn.number;case"boolean":return mn.boolean;case"function":return mn.function;case"bigint":return mn.bigint;case"symbol":return mn.symbol;case"object":return Array.isArray(e)?mn.array:null===e?mn.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?mn.promise:"undefined"!=typeof Map&&e instanceof Map?mn.map:"undefined"!=typeof Set&&e instanceof Set?mn.set:"undefined"!=typeof Date&&e instanceof Date?mn.date:mn.object;default:return mn.unknown}},_n=vn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vn.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const wn=(e,t)=>{let n;switch(e.code){case _n.invalid_type:n=e.received===mn.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case _n.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,vn.jsonStringifyReplacer)}`;break;case _n.unrecognized_keys:n=`Unrecognized key(s) in object: ${vn.joinValues(e.keys,", ")}`;break;case _n.invalid_union:n="Invalid input";break;case _n.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${vn.joinValues(e.options)}`;break;case _n.invalid_enum_value:n=`Invalid enum value. Expected ${vn.joinValues(e.options)}, received '${e.received}'`;break;case _n.invalid_arguments:n="Invalid function arguments";break;case _n.invalid_return_type:n="Invalid function return type";break;case _n.invalid_date:n="Invalid date";break;case _n.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:vn.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case _n.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case _n.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case _n.custom:n="Invalid input";break;case _n.invalid_intersection_types:n="Intersection results could not be merged";break;case _n.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case _n.not_finite:n="Number must be finite";break;default:n=t.defaultError,vn.assertNever(e)}return{message:n}};let Sn=wn;function An(){return Sn}const En=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let a="";const c=r.filter((e=>!!e)).slice().reverse();for(const u of c)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}};function Rn(e,t){const n=An(),r=En({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===wn?void 0:wn].filter((e=>!!e))});e.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return On;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return ParseStatus.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return On;if("aborted"===i.status)return On;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const On=Object.freeze({status:"aborted"}),xn=e=>({status:"dirty",value:e}),Tn=e=>({status:"valid",value:e}),Cn=e=>"aborted"===e.status,In=e=>"dirty"===e.status,Pn=e=>"valid"===e.status,Nn=e=>"undefined"!=typeof Promise&&e instanceof Promise;function jn(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function kn(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}var Zn,Ln,Dn;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Zn||(Zn={}));class ParseInputLazyPath{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Mn=(e,t)=>{if(Pn(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ZodError(e.common.issues);return this._error=t,this._error}}};function Fn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var o,s;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}},description:i}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return bn(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:bn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:bn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Nn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bn(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Mn(r,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bn(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(Nn(r)?r:Promise.resolve(r));return Mn(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),o=()=>r.addIssue({code:_n.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(o(),!1))):!!i||(o(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new ZodEffects({schema:this,typeName:ur.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...Fn(this._def),schema:this,typeName:ur.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ZodDefault({...Fn(this._def),innerType:this,defaultValue:t,typeName:ur.ZodDefault})}brand(){return new ZodBranded({typeName:ur.ZodBranded,type:this,...Fn(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ZodCatch({...Fn(this._def),innerType:this,catchValue:t,typeName:ur.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Un=/^c[^\s-]{8,}$/i,Bn=/^[0-9a-z]+$/,Vn=/^[0-9A-HJKMNP-TV-Z]{26}$/,$n=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qn=/^[a-z0-9_-]{21}$/i,zn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Hn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Wn;const Kn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Gn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Yn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Xn="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Qn=new RegExp(`^${Xn}$`);function Jn(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function er(e){let t=`${Xn}T${Jn(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class ZodString extends ZodType{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==mn.string){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.string,received:t.parsedType}),On}const t=new ParseStatus;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const r=e.data.length>s.value,i=e.data.length<s.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?Rn(n,{code:_n.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&Rn(n,{code:_n.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)Hn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"email",code:_n.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)Wn||(Wn=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Wn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"emoji",code:_n.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)$n.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"uuid",code:_n.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)qn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"nanoid",code:_n.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)Un.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"cuid",code:_n.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)Bn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"cuid2",code:_n.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)Vn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"ulid",code:_n.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(o){n=this._getOrReturnCtx(e,n),Rn(n,{validation:"url",code:_n.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"regex",code:_n.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){er(s).test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){Qn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){new RegExp(`^${Jn(s)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?zn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"duration",code:_n.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(r=e.data,("v4"!==(i=s.version)&&i||!Kn.test(r))&&("v6"!==i&&i||!Gn.test(r))&&(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"ip",code:_n.invalid_string,message:s.message}),t.dirty())):"base64"===s.kind?Yn.test(e.data)||(n=this._getOrReturnCtx(e,n),Rn(n,{validation:"base64",code:_n.invalid_string,message:s.message}),t.dirty()):vn.assertNever(s);var r,i;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:_n.invalid_string,...Zn.errToObj(n)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Zn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Zn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Zn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Zn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Zn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Zn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Zn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Zn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Zn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Zn.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Zn.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...Zn.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Zn.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Zn.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Zn.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Zn.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Zn.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Zn.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Zn.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Zn.errToObj(t)})}nonempty(e){return this.min(1,Zn.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function tr(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}ZodString.create=e=>{var t;return new ZodString({checks:[],typeName:ur.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Fn(e)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==mn.number){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.number,received:t.parsedType}),On}let t;const n=new ParseStatus;for(const r of this._def.checks)if("int"===r.kind)vn.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==tr(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.not_finite,message:r.message}),n.dirty()):vn.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Zn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Zn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Zn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Zn.toString(t))}setLimit(e,t,n,r){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Zn.toString(r)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Zn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Zn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Zn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Zn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Zn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Zn.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Zn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Zn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Zn.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&vn.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ur.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Fn(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==mn.bigint){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.bigint,received:t.parsedType}),On}let t;const n=new ParseStatus;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Rn(t,{code:_n.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):vn.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Zn.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Zn.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Zn.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Zn.toString(t))}setLimit(e,t,n,r){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Zn.toString(r)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Zn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Zn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Zn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Zn.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Zn.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ZodBigInt.create=e=>{var t;return new ZodBigInt({checks:[],typeName:ur.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Fn(e)})};class ZodBoolean extends ZodType{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==mn.boolean){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.boolean,received:t.parsedType}),On}return Tn(e.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ur.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Fn(e)});class ZodDate extends ZodType{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==mn.date){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.date,received:t.parsedType}),On}if(isNaN(e.data.getTime())){return Rn(this._getOrReturnCtx(e),{code:_n.invalid_date}),On}const t=new ParseStatus;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),Rn(n,{code:_n.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):vn.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Zn.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Zn.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ur.ZodDate,...Fn(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==mn.symbol){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.symbol,received:t.parsedType}),On}return Tn(e.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ur.ZodSymbol,...Fn(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==mn.undefined){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.undefined,received:t.parsedType}),On}return Tn(e.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ur.ZodUndefined,...Fn(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==mn.null){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.null,received:t.parsedType}),On}return Tn(e.data)}}ZodNull.create=e=>new ZodNull({typeName:ur.ZodNull,...Fn(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return Tn(e.data)}}ZodAny.create=e=>new ZodAny({typeName:ur.ZodAny,...Fn(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tn(e.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ur.ZodUnknown,...Fn(e)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.never,received:t.parsedType}),On}}ZodNever.create=e=>new ZodNever({typeName:ur.ZodNever,...Fn(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==mn.undefined){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.void,received:t.parsedType}),On}return Tn(e.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ur.ZodVoid,...Fn(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==mn.array)return Rn(t,{code:_n.invalid_type,expected:mn.array,received:t.parsedType}),On;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(Rn(t,{code:e?_n.too_big:_n.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Rn(t,{code:_n.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Rn(t,{code:_n.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new ParseInputLazyPath(t,e,t.path,n))))).then((e=>ParseStatus.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new ParseInputLazyPath(t,e,t.path,n))));return ParseStatus.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:Zn.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:Zn.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:Zn.toString(t)}})}nonempty(e){return this.min(1,e)}}function nr(e){if(e instanceof ZodObject){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=ZodOptional.create(nr(r))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:nr(e.element)}):e instanceof ZodOptional?ZodOptional.create(nr(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(nr(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map((e=>nr(e)))):e}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ur.ZodArray,...Fn(t)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=vn.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==mn.object){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.object,received:t.parsedType}),On}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const a in n.data)i.includes(a)||o.push(a);const s=[];for(const a of i){const e=r[a],t=n.data[a];s.push({key:{status:"valid",value:a},value:e._parse(new ParseInputLazyPath(n,t,n.path,a)),alwaysSet:a in n.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)s.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(Rn(n,{code:_n.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>ParseStatus.mergeObjectSync(t,e))):ParseStatus.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return Zn.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,o,s;const a=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=Zn.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ur.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return vn.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return vn.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return nr(this)}partial(e){const t={};return vn.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new ZodObject({...this._def,shape:()=>t})}required(e){const t={};return vn.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof ZodOptional;)e=e._def.innerType;t[n]=e}})),new ZodObject({...this._def,shape:()=>t})}keyof(){return or(vn.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ur.ZodObject,...Fn(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ur.ZodObject,...Fn(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ur.ZodObject,...Fn(t)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map((e=>new ZodError(e.ctx.common.issues)));return Rn(t,{code:_n.invalid_union,unionErrors:n}),On}));{let e;const r=[];for(const o of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new ZodError(e)));return Rn(t,{code:_n.invalid_union,unionErrors:i}),On}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:ur.ZodUnion,...Fn(t)});const rr=e=>e instanceof ZodLazy?rr(e.schema):e instanceof ZodEffects?rr(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?vn.objectValues(e.enum):e instanceof ZodDefault?rr(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:e instanceof ZodOptional?[void 0,...rr(e.unwrap())]:e instanceof ZodNullable?[null,...rr(e.unwrap())]:e instanceof ZodBranded||e instanceof ZodReadonly?rr(e.unwrap()):e instanceof ZodCatch?rr(e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==mn.object)return Rn(t,{code:_n.invalid_type,expected:mn.object,received:t.parsedType}),On;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Rn(t,{code:_n.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),On)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const i of t){const t=rr(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,i)}}return new ZodDiscriminatedUnion({typeName:ur.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Fn(n)})}}function ir(e,t){const n=bn(e),r=bn(t);if(e===t)return{valid:!0,data:e};if(n===mn.object&&r===mn.object){const n=vn.objectKeys(t),r=vn.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const o of r){const n=ir(e[o],t[o]);if(!n.valid)return{valid:!1};i[o]=n.data}return{valid:!0,data:i}}if(n===mn.array&&r===mn.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=ir(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===mn.date&&r===mn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Cn(e)||Cn(r))return On;const i=ir(e.value,r.value);return i.valid?((In(e)||In(r))&&t.dirty(),{status:t.value,value:i.data}):(Rn(n,{code:_n.invalid_intersection_types}),On)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZodIntersection.create=(e,t,n)=>new ZodIntersection({left:e,right:t,typeName:ur.ZodIntersection,...Fn(n)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==mn.array)return Rn(n,{code:_n.invalid_type,expected:mn.array,received:n.parsedType}),On;if(n.data.length<this._def.items.length)return Rn(n,{code:_n.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),On;!this._def.rest&&n.data.length>this._def.items.length&&(Rn(n,{code:_n.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new ParseInputLazyPath(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>ParseStatus.mergeArray(t,e))):ParseStatus.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ur.ZodTuple,rest:null,...Fn(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==mn.object)return Rn(n,{code:_n.invalid_type,expected:mn.object,received:n.parsedType}),On;const r=[],i=this._def.keyType,o=this._def.valueType;for(const s in n.data)r.push({key:i._parse(new ParseInputLazyPath(n,s,n.path,s)),value:o._parse(new ParseInputLazyPath(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?ParseStatus.mergeObjectAsync(t,r):ParseStatus.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ZodRecord(t instanceof ZodType?{keyType:e,valueType:t,typeName:ur.ZodRecord,...Fn(n)}:{keyType:ZodString.create(),valueType:e,typeName:ur.ZodRecord,...Fn(t)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==mn.map)return Rn(n,{code:_n.invalid_type,expected:mn.map,received:n.parsedType}),On;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map((([e,t],o)=>({key:r._parse(new ParseInputLazyPath(n,e,n.path,[o,"key"])),value:i._parse(new ParseInputLazyPath(n,t,n.path,[o,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return On;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return On;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}ZodMap.create=(e,t,n)=>new ZodMap({valueType:t,keyType:e,typeName:ur.ZodMap,...Fn(n)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==mn.set)return Rn(n,{code:_n.invalid_type,expected:mn.set,received:n.parsedType}),On;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Rn(n,{code:_n.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Rn(n,{code:_n.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return On;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>i._parse(new ParseInputLazyPath(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>o(e))):o(s)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:Zn.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:Zn.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ur.ZodSet,...Fn(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==mn.function)return Rn(t,{code:_n.invalid_type,expected:mn.function,received:t.parsedType}),On;function n(e,n){return En({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,An(),wn].filter((e=>!!e)),issueData:{code:_n.invalid_arguments,argumentsError:n}})}function r(e,n){return En({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,An(),wn].filter((e=>!!e)),issueData:{code:_n.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof ZodPromise){const e=this;return Tn((async function(...t){const s=new ZodError([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw s.addIssue(n(t,e)),s})),c=await Reflect.apply(o,this,a);return await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw s.addIssue(r(c,e)),s}))}))}{const e=this;return Tn((function(...t){const s=e._def.args.safeParse(t,i);if(!s.success)throw new ZodError([n(t,s.error)]);const a=Reflect.apply(o,this,s.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new ZodError([r(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:ur.ZodFunction,...Fn(n)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:ur.ZodLazy,...Fn(t)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Rn(t,{received:t.data,code:_n.invalid_literal,expected:this._def.value}),On}return{status:"valid",value:e.data}}get value(){return this._def.value}}function or(e,t){return new ZodEnum({values:e,typeName:ur.ZodEnum,...Fn(t)})}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:ur.ZodLiteral,...Fn(t)});class ZodEnum extends ZodType{constructor(){super(...arguments),Ln.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Rn(t,{expected:vn.joinValues(n),received:t.parsedType,code:_n.invalid_type}),On}if(jn(this,Ln,"f")||kn(this,Ln,new Set(this._def.values),"f"),!jn(this,Ln,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Rn(t,{received:t.data,code:_n.invalid_enum_value,options:n}),On}return Tn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ZodEnum.create(e,{...this._def,...t})}exclude(e,t=this._def){return ZodEnum.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Ln=new WeakMap,ZodEnum.create=or;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),Dn.set(this,void 0)}_parse(e){const t=vn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==mn.string&&n.parsedType!==mn.number){const e=vn.objectValues(t);return Rn(n,{expected:vn.joinValues(e),received:n.parsedType,code:_n.invalid_type}),On}if(jn(this,Dn,"f")||kn(this,Dn,new Set(vn.getValidEnumValues(this._def.values)),"f"),!jn(this,Dn,"f").has(e.data)){const e=vn.objectValues(t);return Rn(n,{received:n.data,code:_n.invalid_enum_value,options:e}),On}return Tn(e.data)}get enum(){return this._def.values}}Dn=new WeakMap,ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:ur.ZodNativeEnum,...Fn(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==mn.promise&&!1===t.common.async)return Rn(t,{code:_n.invalid_type,expected:mn.promise,received:t.parsedType}),On;const n=t.parsedType===mn.promise?t.data:Promise.resolve(t.data);return Tn(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:ur.ZodPromise,...Fn(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ur.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{Rn(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return On;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?On:"dirty"===r.status||"dirty"===t.value?xn(r.value):r}));{if("aborted"===t.value)return On;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?On:"dirty"===r.status||"dirty"===t.value?xn(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?On:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?On:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Pn(e))return e;const o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Pn(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}vn.assertNever(r)}}ZodEffects.create=(e,t,n)=>new ZodEffects({schema:e,typeName:ur.ZodEffects,effect:t,...Fn(n)}),ZodEffects.createWithPreprocess=(e,t,n)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ur.ZodEffects,...Fn(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===mn.undefined?Tn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:ur.ZodOptional,...Fn(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===mn.null?Tn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:ur.ZodNullable,...Fn(t)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===mn.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:ur.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Fn(t)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Nn(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:ur.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Fn(t)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==mn.nan){const t=this._getOrReturnCtx(e);return Rn(t,{code:_n.invalid_type,expected:mn.nan,received:t.parsedType}),On}return{status:"valid",value:e.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ur.ZodNaN,...Fn(e)});const sr=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?On:"dirty"===e.status?(t.dirty(),xn(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?On:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:ur.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const t=this._def.innerType._parse(e);return Pn(t)&&(t.value=Object.freeze(t.value)),t}unwrap(){return this._def.innerType}}function ar(e,t={},n){return e?ZodAny.create().superRefine(((r,i)=>{var o,s;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,a=null===(s=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===s||s,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:a})}})):ZodAny.create()}ZodReadonly.create=(e,t)=>new ZodReadonly({innerType:e,typeName:ur.ZodReadonly,...Fn(t)});const cr={object:ZodObject.lazycreate};var ur;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ur||(ur={}));const lr=ZodString.create,dr=ZodNumber.create,pr=ZodNaN.create,hr=ZodBigInt.create,fr=ZodBoolean.create,gr=ZodDate.create,vr=ZodSymbol.create,yr=ZodUndefined.create,mr=ZodNull.create,br=ZodAny.create,_r=ZodUnknown.create,wr=ZodNever.create,Sr=ZodVoid.create,Ar=ZodArray.create,Er=ZodObject.create,Rr=ZodObject.strictCreate,Or=ZodUnion.create,xr=ZodDiscriminatedUnion.create,Tr=ZodIntersection.create,Cr=ZodTuple.create,Ir=ZodRecord.create,Pr=ZodMap.create,Nr=ZodSet.create,jr=ZodFunction.create,kr=ZodLazy.create,Zr=ZodLiteral.create,Lr=ZodEnum.create,Dr=ZodNativeEnum.create,Mr=ZodPromise.create,Fr=ZodEffects.create,Ur=ZodOptional.create,Br=ZodNullable.create,Vr=ZodEffects.createWithPreprocess,$r=ZodPipeline.create,qr={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},zr=On;var Hr=Object.freeze({__proto__:null,defaultErrorMap:wn,setErrorMap:function(e){Sn=e},getErrorMap:An,makeIssue:En,EMPTY_PATH:[],addIssueToContext:Rn,ParseStatus,INVALID:On,DIRTY:xn,OK:Tn,isAborted:Cn,isDirty:In,isValid:Pn,isAsync:Nn,get util(){return vn},get objectUtil(){return yn},ZodParsedType:mn,getParsedType:bn,ZodType,datetimeRegex:er,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND:sr,ZodBranded,ZodPipeline,ZodReadonly,custom:ar,Schema:ZodType,ZodSchema:ZodType,late:cr,get ZodFirstPartyTypeKind(){return ur},coerce:qr,any:br,array:Ar,bigint:hr,boolean:fr,date:gr,discriminatedUnion:xr,effect:Fr,enum:Lr,function:jr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ar((t=>t instanceof e),t),intersection:Tr,lazy:kr,literal:Zr,map:Pr,nan:pr,nativeEnum:Dr,never:wr,null:mr,nullable:Br,number:dr,object:Er,oboolean:()=>fr().optional(),onumber:()=>dr().optional(),optional:Ur,ostring:()=>lr().optional(),pipeline:$r,preprocess:Vr,promise:Mr,record:Ir,set:Nr,strictObject:Rr,string:lr,symbol:vr,transformer:Fr,tuple:Cr,undefined:yr,union:Or,unknown:_r,void:Sr,NEVER:zr,ZodIssueCode:_n,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError});const Wr=Er({fontSize:lr().optional().nullable()}).passthrough().optional(),Kr=Er({target:lr().optional().nullable(),rel:lr().optional().nullable(),referrerPolicy:lr().optional().nullable()}).optional().nullable(),Gr=Er({target:lr().optional().nullable(),rel:lr().optional().nullable(),referrerPolicy:lr().optional().nullable(),href:lr().optional().nullable()}).optional().nullable(),Yr=Er({identifier:lr().uuid(),settings:Er({positionSelector:lr().optional().nullable(),positionInjectType:Hr.nativeEnum(te),maxNumberOfColumns:dr().optional().nullable(),footerType:lr().optional().nullable(),format:Hr.nativeEnum(ne),datasetId:lr().optional().nullable(),linkCloaking:fr(),headingText:lr().optional().nullable(),privacyPolicyUrl:lr().optional().nullable(),linkProperties:Er({internal:Kr,external:Kr,subtitle:Kr,privacyPolicy:Gr,analytics:Gr,brand:Gr}).optional().nullable(),style:Er({heading:Wr,container:Wr,outerContainer:Wr,list:Wr,item:Wr,itemLink:Wr,itemTitle:Wr,itemSubtitle:Wr,itemMeta:Wr,itemAuthors:Wr,footer:Wr,footerLeft:Wr,footerRight:Wr}).passthrough().optional().nullable()}),constraints:Ar(Er({type:Hr.nativeEnum(re),constraint:Er({any:fr(),values:Ar(lr()).optional().nullable()})}))}),Xr=Er({identifier:lr().uuid(),settings:Er({swoopId:lr().optional().nullable(),swoopIntegrationType:Hr.nativeEnum(ee).optional().nullable(),swoopScriptUrl:lr().optional().nullable(),npiSources:Ar(Hr.nativeEnum(X)).nullable(),npiDetectionEnabled:fr().nullable().default(!1),npiDetectors:Er({[X.LHK]:Er({url:lr().url()}).optional(),[X.DMD]:Er({url:lr().url()}).optional()}).optional().nullable()})}),Qr=Er({adSet:Xr,adSlots:Ar(Yr)}),Jr=Ar(Er({number:dr().optional(),encryptedNumber:lr().optional(),source:Hr.nativeEnum(X),destination:Hr.nativeEnum(Q)})),ei=Ar(Er({id:lr().uuid(),title:lr(),subtitle:Hr.union([lr().optional().nullable(),Er({type:lr().optional(),content:lr().optional(),url:lr().url().optional()})]).optional().nullable(),url:lr().url(),campaignId:lr(),publicationId:lr().nullable().optional(),linkingType:Hr.nativeEnum(J),clickUrl:lr().url(),impressionUrl:lr().url(),authors:lr().optional().nullable(),publicationName:lr().optional().nullable(),publicationDate:lr().optional().nullable(),publicationAbbreviatedName:lr().optional().nullable()})),ti=Er({id:lr(),scriptId:lr(),datasetId:lr().optional(),cookie:Er({expires:dr().optional(),flags:lr().optional(),path:lr().optional(),domain:lr().optional()}).optional(),userProperties:Ir(lr()).optional(),startTime:dr().gte(0).optional().default((new Date).getTime()),debug:fr().optional().default(!1),publicSettings:Qr.optional().nullable()}),ni=Er({widgetInstallUrl:lr().nullable().default(null),apiUrl:lr(),version:lr(),sessionId:lr().optional().default(r())}).extend(ti.shape);var ri;let ii=M()(ri=function(e,t){return F("backendHttpClient")(e,void 0,0)}(ri=function(e,t){return U()(e,void 0,1)}(ri=Reflect.metadata("design:type",Function)(ri=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientInterface?Object:HttpClientInterface,void 0===H?Object:H])(ri=Reflect.metadata("design:type",Function)(ri=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientInterface?Object:HttpClientInterface,void 0===H?Object:H])(ri=class ApiClient{constructor(e,t){this.eventQueue=void 0,this.httpClient=e,this.logger=t,this.eventQueue=new EventQueue({maxQueueSize:20,timeout:2e3,callback:this.eventQueueCallback.bind(this)})}async getRecommendations(e,t){const n=this.httpClient.createRequest("POST",`/ad-slots/${e}/recommendations`,{json:t}),r=await this.httpClient.sendRequest(n).then((e=>e.json()));try{return ei.parse(r)}catch(o){var i;throw null==(i=this.logger)||i.error("Unable to parse public recommendation items",o),new Error("Unable to parse public recommendation items",{cause:o})}}async getSettings(e){const t=this.httpClient.createRequest("GET",`/ad-sets/${e}/settings`),n=await this.httpClient.sendRequest(t).then((e=>e.json()));try{return Qr.parse(n)}catch(i){var r;throw null==(r=this.logger)||r.error("Unable to parse public settings",i),new Error("Unable to parse public settings",{cause:i})}}async processNpi(e,t){const n=this.httpClient.createRequest("POST",`/ad-sets/${t}/npi`,{json:e}),r=await this.httpClient.sendRequest(n).then((e=>{var t;if(e.getStatusCode()>=400)throw null==(t=this.logger)||t.error(`Unable to process npi. Status: ${e.getStatusCode()}, ${e.getReasonPhrase()}`),new Error("Unable to process npi");return e})).then((e=>e.json())).catch((()=>[]));try{return Jr.parse(r)}catch(o){var i;throw null==(i=this.logger)||i.error("Unable to parse public npis",o),new Error("Unable to parse public npis",{cause:o})}}async registerEvent(e,t){this.eventQueue.push({adSlotIdentifier:e,payload:t})}async eventQueueCallback(e){const t=e.reduce(((e,t)=>{var n;return e.has(t.adSlotIdentifier)||e.set(t.adSlotIdentifier,[]),null==(n=e.get(t.adSlotIdentifier))||n.push(t),e}),new Map),n=[];for(const[r,i]of t.entries()){const e=this.httpClient.createRequest("POST",`/ad-slots/${r}/events`,{json:i.map((e=>e.payload))});n.push(this.httpClient.sendRequest(e).then((e=>{})))}await Promise.all(n)}})||ri)||ri)||ri)||ri)||ri)||ri)||ri;class AdSet{constructor(){this.id=void 0,this.settings=void 0,this.adSlots=new Set}getId(){if(!this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getAdSlots(){return[...this.adSlots.values()]}addAdSlot(e){return this.hasAdSlot(e)||(this.adSlots.add(e),e.setAdSet(this)),this}hasAdSlot(e){return this.adSlots.has(e)}removeAdSlot(e){return this.hasAdSlot(e)?(this.adSlots.delete(e)&&e.getAdSet()===this&&e.setAdSet(void 0),this):this}getSettings(){if(!this.settings)throw new Error(`Attempt to access "settings" of ${this.constructor.name} before initialization`);return this.settings}setSettings(e){return this.settings=e,e.setAdSet(this),this}}class AdSetSettings{constructor(){this.adSet=void 0,this.swoopId=void 0,this.swoopIntegrationType=void 0,this.swoopScriptUrl=void 0,this.npiDetectionEnabled=!1,this.npiSources=[],this.npiDetectors=void 0}getAdSet(){var e;return null!=(e=this.adSet)?e:null}setAdSet(e){return this.adSet=e,this}isNpiDetectionEnabled(){var e;return null!=(e=this.npiDetectionEnabled)&&e}getSwoopId(){var e;return null!=(e=this.swoopId)?e:null}getSwoopIntegrationType(){var e;return null!=(e=this.swoopIntegrationType)?e:ee.NONE}getSwoopScriptUrl(){var e;return null!=(e=this.swoopScriptUrl)?e:null}getNpiSources(){return this.npiSources}getNpiDetectors(){var e;return null!=(e=this.npiDetectors)?e:null}}class AdSetResolveEvent extends event_Event{constructor(e,t){super(),this.render=!0,this.id=e,this.adSet=t}getId(){var e,t;return null!=(e=null==(t=this.adSet)?void 0:t.getId())?e:this.id}getAdSet(){var e;return null!=(e=this.adSet)?e:null}}var oi;let si=M()(oi=function(e,t){return U()(e,void 0,3)}(oi=Reflect.metadata("design:type",Function)(oi=Reflect.metadata("design:paramtypes",[void 0===gn?Object:gn,void 0===ii?Object:ii,void 0===K?Object:K,void 0===H?Object:H])(oi=Reflect.metadata("design:type",Function)(oi=Reflect.metadata("design:paramtypes",[void 0===gn?Object:gn,void 0===ii?Object:ii,void 0===K?Object:K,void 0===H?Object:H])(oi=class AdSetResolver{constructor(e,t,n,r){this.adSlotResolver=e,this.apiClient=t,this.eventManager=n,this.logger=r}async resolve(e){var t;const n=e.getApplicationId();null==(t=this.logger)||t.info(`Resolving AdSet with identifier: ${n}`);let r=await this.eventManager.dispatch(q.AD_SET_PRE_RESOLVE,new AdSetResolveEvent(n));if(r.isPropagationStopped())return null;let i=e.getApplicationConfig().publicSettings;if(!i){var o;null==(o=this.logger)||o.debug(`Fetching AdSet settings with identifier: ${n}`);try{i=await this.apiClient.getSettings(n)}catch(u){var s;return null==(s=this.logger)||s.error(`Error while resolving AdSet with identifier: ${n}`,u),null}}const a=new AdSet;hn(a,{id:i.adSet.identifier});const c=new AdSetSettings;hn(c,i.adSet.settings),a.setSettings(c);for(const l of i.adSlots){const e=await this.adSlotResolver.resolve(l);e&&a.addAdSlot(e)}return r=await this.eventManager.dispatch(q.AD_SET_POST_RESOLVE,new AdSetResolveEvent(n,a)),r.getAdSet()}})||oi)||oi)||oi)||oi)||oi)||oi;class metadata_Metadata{constructor(){this.title=null,this.doi=null}getTitle(){return this.title}setTitle(e){return this.title=null!=e?e:null,this}getDoi(){return this.doi}setDoi(e){return this.doi=null!=e?e:null,this}}var ai;let ci=M()(ai=function(e,t){return B("MetadataProcessor")(e,void 0,0)}(ai=Reflect.metadata("design:type",Function)(ai=Reflect.metadata("design:paramtypes",[Array])(ai=Reflect.metadata("design:type",Function)(ai=Reflect.metadata("design:paramtypes",[Array])(ai=class MetadataResolver{constructor(e){this.processors=e}async resolve(){const e=new metadata_Metadata;for(const t of this.processors)await t.process(e);return e}})||ai)||ai)||ai)||ai)||ai)||ai;var ui;let li=M()(ui=function(e,t){return U()(e,void 0,7)}(ui=Reflect.metadata("design:type",Function)(ui=Reflect.metadata("design:paramtypes",[void 0===$?Object:$,void 0===si?Object:si,void 0===dn?Object:dn,void 0===ce?Object:ce,void 0===ci?Object:ci,void 0===K?Object:K,void 0===Y?Object:Y,void 0===H?Object:H])(ui=Reflect.metadata("design:type",Function)(ui=Reflect.metadata("design:paramtypes",[void 0===$?Object:$,void 0===si?Object:si,void 0===dn?Object:dn,void 0===ce?Object:ce,void 0===ci?Object:ci,void 0===K?Object:K,void 0===Y?Object:Y,void 0===H?Object:H])(ui=class Application{constructor(e,t,n,r,i,o,s,a){this.initialized=!1,this.context=e,this.adSetResolver=t,this.adSetRenderer=n,this.npiDetector=r,this.metadataResolver=i,this.eventManager=o,this.integrationRunner=s,this.logger=a}async run(){await this.eventManager.dispatch(q.APPLICATION_PRE_RUN,new ApplicationLifecycleEvent(this)),await this.init();const e=this.context.getAdSet();if(e){this.context.setMetadata(await this.metadataResolver.resolve());try{await this.integrationRunner.run(e)}catch(r){var t;if(r instanceof IntegrationStoppedExecutionException)this.context.setCanRender(!1);else null==(t=this.logger)||t.error("Integration failed to run",r)}this.context.canRender()?(await this.render(),await this.eventManager.dispatch(q.APPLICATION_POST_RUN,new ApplicationLifecycleEvent(this))):await this.eventManager.dispatch(q.APPLICATION_POST_RUN,new ApplicationLifecycleEvent(this))}else{var n;null==(n=this.logger)||n.error(`Ad set with identifier ${this.context.getApplicationId()} cannot be resolved`)}}async init(){if(this.initialized)return;await this.eventManager.dispatch(q.APPLICATION_PRE_INIT,new ApplicationLifecycleEvent(this));const e=await this.adSetResolver.resolve(this.context);var t;e?(this.context.setAdSet(e),await this.npiDetector.detect(e),this.initialized=!0,await this.eventManager.dispatch(q.APPLICATION_POST_INIT,new ApplicationLifecycleEvent(this))):null==(t=this.logger)||t.error(`Ad set with identifier ${this.context.getApplicationId()} cannot be resolved`)}async render(){const e=this.context.getAdSet();if(!e)throw new Error("Ad set is not defined");await this.adSetRenderer.render(e)}})||ui)||ui)||ui)||ui)||ui)||ui;var di=n(9488),pi=n.n(di);const hi=(e,t)=>e===ne.AUTO?"auto":parseInt(fi[e].split("x")["width"===t?0:1],10),fi={[ne.AUTO]:"auto",[ne.LEADERBOARD]:"728x90",[ne.LARGE_LEADERBOARD]:"840x150",[ne.XL_LEADERBOARD]:"995x123",[ne.TV_SPOT_LEADERBOARD]:"840x250",[ne.BILLBOARD]:"970x250",[ne.WIDE_SKYSCRAPER]:"160x600",[ne.SKYSCRAPER]:"120x600",[ne.HALF_PAGE_SKYSCRAPER]:"300x600",[ne.MEDIUM_RECTANGLE]:"300x250",[ne.SQUARE_RECTANGLE]:"250x250",[ne.HALF_PAGE_RECTANGLE]:"300x600",[ne.XL_RECTANGLE]:"468x400",[ne.MEDIUM_SPLASH]:"640x480",[ne.SMALL_SPLASH]:"500x400",[ne.SMARTPHONE_BANNER]:"320x50",[ne.SUPER_LEADERBOARD]:"970x90",[ne.PORTRAIT]:"300x1050",[ne.MOBILEPHONEINTERSTITIAL1]:"640x1136",[ne.MOBILEPHONEINTERSTITIAL2]:"750x1334",[ne.MOBILEPHONEINTERSTITIAL3]:"1080x1920",[ne.FEATURE_PHONE_SMALL_BANNER]:"120x20",[ne.FEATURE_PHONE_MEDIUM_BANNER]:"168x28",[ne.FEATURE_PHONE_LARGE_BANNER]:"216x36"},gi={outerContainer:e=>{var t,n;return pi()({},{textDecoration:"none !important",padding:"4px 0 0 4px !important",font:"inherit !important"},null!=(t=null==(n=e.style)?void 0:n.outerContainer)?t:{})},container:e=>{var t,n;return pi()({},{display:"flex !important",flexDirection:"column !important",justifyContent:"space-between !important",boxSizing:"border-box !important",font:"13px/18px Arial,Helvetica CY,Nimbus Sans L,sans-serif!important",margin:"0 !important",padding:"0 !important",background:"none !important",width:e.format===ne.AUTO?"auto":hi(e.format,"width")+"px",height:e.format===ne.AUTO?"auto":hi(e.format,"height")+"px","&:hover $footer":{color:"#000000 !important","& $footerlogo svg > path:first-child":{fill:"#CA2127 !important"},"& $footerlogo svg > g.text":{fill:"#16325c !important"},"& $footercog svg > g > path":{fill:"#000000 !important"}}},null!=(t=null==(n=e.style)?void 0:n.container)?t:{})},heading:e=>{var t,n;return pi()({},{fontSize:"14px !important",fontWeight:"700 !important",marginBottom:"20px !important",paddingTop:"8px !important"},null!=(t=null==(n=e.style)?void 0:n.heading)?t:{})},sections:e=>{var t;return pi()({},{display:"flex",flexDirection:e.format===ne.AUTO||hi(e.format,"width")>hi(e.format,"height")?"row":"column",justifyContent:"space-between !important",height:"100% !important",padding:"0 !important",margin:"0 !important",flexWrap:"wrap !important",gap:"10px !important","& $section":{flex:"1 0 49% !important",boxSizing:"border-box !important"}},"sections"in e.style?null==(t=e.style)?void 0:t.sections:{})},section:e=>{var t;return pi()({},{},"section"in e.style?null==(t=e.style)?void 0:t.section:{})},list:e=>{var t,n;return pi()({},{listStyle:"none !important",margin:"0 !important",padding:"0 !important"},null!=(t=null==(n=e.style)?void 0:n.list)?t:{})},listitem:e=>{var t,n;return pi()({},{listStyleType:"none !important",marginBottom:"12px !important"},null!=(t=null==(n=e.style)?void 0:n.item)?t:{})},listItemLink:e=>{var t,n;return pi()({},{color:"#000000 !important",textDecoration:"none !important","&:hover":{textDecoration:"underline !important","& svg > g > path":{stroke:"#000000 !important"}}},null!=(t=null==(n=e.style)?void 0:n.itemLink)?t:{})},listItemTitleExternalLinkIcon:e=>{var t;return pi()({},{display:"inline-block !important",marginLeft:"2px !important",verticalAlign:"-3px !important",cursor:"pointer !important","& svg":{height:"14px !important",width:"14px !important"},"&:hover":{cursor:"pointer !important"}},"itemTitleExternalLinkIcon"in e.style?null==(t=e.style)?void 0:t.itemTitleExternalLinkIcon:{})},listItemMeta:e=>{var t,n;return pi()({},{color:"#a2b1b6 !important",marginTop:"2px !important","& a":{color:"#a2b1b6 !important",textDecoration:"none !important","&:hover":{textDecoration:"underline !important"}}},null!=(t=null==(n=e.style)?void 0:n.itemMeta)?t:{})},listItemSubtitle:e=>{var t;return pi()({},{},null==(t=e.style)?void 0:t.itemSubtitle)},listItemAuthors:e=>{var t;return pi()({},{},null==(t=e.style)?void 0:t.itemAuthors)},listItemPublicationName:e=>{var t;return pi()({},{},"itemPublicationName"in e.style?null==(t=e.style)?void 0:t.itemPublicationName:{})},listItemPublicationDate:e=>{var t;return pi()({},{},"itemPublicationDate"in e.style?null==(t=e.style)?void 0:t.itemPublicationDate:{})},footer:e=>{var t,n;return pi()({},{borderTop:"2px solid #e9eeef !important",color:"#cad5d9 !important",fontFamily:'SF Pro Display, Arial, "Helvetica CY", sans-serif !important',fontSize:"14px !important",margin:"13px 0 15px 0 !important",padding:"15px 0 0 !important",display:"flex !important",flexWrap:"wrap !important",justifyContent:"space-between !important",flexDirection:"row !important"},null!=(t=null==(n=e.style)?void 0:n.footer)?t:{})},footerleft:e=>{var t;return pi()({},{"& a":{display:"flex !important",alignItems:"center !important",color:"inherit !important",textDecoration:"none !important","&:hover":{textDecoration:"none !important"}}},null!=(t=e.style.footerLeft)?t:{})},footerright:e=>pi()({},{position:"relative !important",textAlign:"right !important"},"footerRight"in e.style?e.style.footerRight:{}),footerlogo:e=>pi()({},{display:"inline-block !important",minWidth:"70px !important",height:"22px !important",marginLeft:"5px !important",verticalAlign:"middle !important","& svg":{height:"22px !important",width:"auto !important"}},"footerLogo"in e.style?e.style.footerLogo:{}),footercog:e=>pi()({},{display:"inline-block !important",height:"16px !important",width:"16px !important",verticalAlign:"middle !important","&:hover":{cursor:"pointer !important"}},"footerCog"in e.style?e.style.footerCog:{}),footersettings:e=>pi()({},{display:"inline-block !important",paddingLeft:"10px !important","&:hover $footersettingsmodal":{display:"block !important"}},"footerSettings"in e.style?e.style.footerSettings:{}),footersettingsmodal:e=>pi()({},{position:"absolute !important",padding:"10px !important",background:"#ffffff !important",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.15) !important",border:"solid 1px #d8dde6 !important",borderRadius:"3px !important",right:"0 !important",bottom:"0 !important",display:"none !important",marginBottom:"17px !important","& ul":{listStyle:"none !important",padding:"0 !important",margin:"0 !important",whiteSpace:"nowrap !important",textAlign:"left !important","& li":{"& a":{color:"#16325c !important",textDecoration:"none !important",display:"block",padding:"10px 20px !important",transition:"0.2s ease-in-out","&:hover":{color:"#196eed !important"}}}}},"footerSettingsModal"in e.style?e.style.footerSettingsModal:{})};var vi={Request:"Request",Singleton:"Singleton",Transient:"Transient"},yi={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},mi={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},bi=0;function _i(){return bi++}var wi=function(){function e(e,t){this.id=_i(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=yi.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===vi.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),Si=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(O,e),userGeneratedMetadata:Reflect.getMetadata(E,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(R,e)||[]},e}(),Ai={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function Ei(e){return e instanceof RangeError||e.message===y}function Ri(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function Oi(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=Ci(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r}function xi(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||xi(e.parentRequest,t))}function Ti(e){e.childRequests.forEach((function(e){if(xi(e,e.serviceIdentifier)){var t=function(e){var t=function e(t,n){void 0===n&&(n=[]);var r=Ri(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(e);throw new Error(d+" "+t)}Ti(e)}))}function Ci(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var Ii=function(){function e(e){this.id=_i(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),Pi=function(e,t){this.parentContext=e,this.rootRequest=t},Ni=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),ji=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),ki=function(){function e(e,t,n,r){this.id=_i(),this.type=e,this.serviceIdentifier=n;var i="symbol"==typeof t?t.toString().slice(7,-1):t;this.name=new ji(i||""),this.identifier=t,this.metadata=new Array;var o=null;"string"==typeof r?o=new I(m,r):r instanceof I&&(o=r),null!==o&&this.metadata.push(o)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(A)},e.prototype.matchesArray=function(e){return this.matchesTag(A)(e)},e.prototype.isNamed=function(){return this.hasTag(m)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return C.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(w)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===m}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return C.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(m)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}(),Zi=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function Li(e,t,n,r){var i=e.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw new Error(u+" "+t+".");var s=i.userGeneratedMetadata,a=Object.keys(s),c=0===n.length&&a.length>0,l=a.length>n.length,d=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=Di(s,e,t,n,r);null!==a&&o.push(a)}return o}(r,t,o,s,c||l?a.length:n.length),p=Fi(e,n,t);return Zi(Zi([],d,!0),p,!0)}function Di(e,t,n,r,i){var o=i[e.toString()]||[],s=Bi(o),a=!0!==s.unmanaged,c=r[e],u=s.inject||s.multiInject;if((c=u||c)instanceof Ni&&(c=c.unwrap()),a){if(!t&&(c===Object||c===Function||void 0===c))throw new Error(l+" argument "+e+" in class "+n+".");var d=new ki(mi.ConstructorArgument,s.targetName,c);return d.metadata=o,d}return null}function Mi(e,t,n,r){var i=e||t;if(void 0===i){var o=u+" for property "+String(n)+" in class "+r+".";throw new Error(o)}return i}function Fi(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],o=Object.getOwnPropertySymbols(r),s=0,a=Object.keys(r).concat(o);s<a.length;s++){var c=a[s],u=r[c],l=Bi(u),d=l.targetName||c,p=Mi(l.inject,l.multiInject,c,n),h=new ki(mi.ClassProperty,d,p);h.metadata=u,i.push(h)}var f=Object.getPrototypeOf(t.prototype).constructor;if(f!==Object){var g=Fi(e,f,n);i=Zi(Zi([],i,!0),g,!0)}return i}function Ui(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=Li(e,Ci(n),n,!0),i=r.map((function(e){return e.metadata.filter((function(e){return e.key===_}))})),o=[].concat.apply([],i).length,s=r.length-o;return s>0?s:Ui(e,n)}return 0}function Bi(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[S],multiInject:t[A],targetName:t[b],unmanaged:t[_]}}var Vi=function(){function e(e,t,n,r,i){this.id=_i(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function $i(e){return e._bindingDictionary}function qi(e,t,n,r,i){var o=Hi(n.container,i.serviceIdentifier),s=[];return o.length===Ai.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=Hi(n.container,i.serviceIdentifier)),s=t?o:o.filter((function(e){var t=new Vi(e.serviceIdentifier,n,r,e,i);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case Ai.NoBindingsAvailable:if(n.isOptional())return t;var i=Ri(e),o=c;throw o+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e}(i,n),o+=Oi(r,i,Hi),new Error(o);case Ai.OnlyOneBindingAvailable:return t;case Ai.MultipleBindingsAvailable:default:if(n.isArray())return t;i=Ri(e),o=a+" "+i;throw o+=Oi(r,i,Hi),new Error(o)}}(i.serviceIdentifier,s,i,n.container),s}function zi(e,t,n,r,i,o){var s,a;if(null===i){s=qi(e,t,r,null,o),a=new Vi(n,r,null,s,o);var c=new Pi(r,a);r.addPlan(c)}else s=qi(e,t,r,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(t){var n=null;if(o.isArray())n=a.addChildRequest(t.serviceIdentifier,t,o);else{if(t.cache)return;n=a}if(t.type===yi.Instance&&null!==t.implementationType){var i=function(e,t){return Li(e,Ci(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var s=Ui(e,t.implementationType);if(i.length<s){var c=h(Ci(t.implementationType));throw new Error(c)}}i.forEach((function(t){zi(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function Hi(e,t){var n=[],r=$i(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=Hi(e.parent,t)),n}function Wi(e,t,n,r,i,o,s,a){void 0===a&&(a=!1);var c=new Ii(t),u=function(e,t,n,r,i,o){var s=new I(e?A:S,n),a=new ki(t,r,n,s);if(void 0!==i){var c=new I(i,o);a.metadata.push(c)}return a}(n,r,i,"",o,s);try{return zi(e,a,i,c,null,u),c}catch(l){throw Ei(l)&&Ti(c.plan.rootRequest),l}}function Ki(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function Gi(e){return!!Ki(e)||Array.isArray(e)&&e.some(Ki)}var Yi,Xi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Qi=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ji=function(e,t,n){e.has(t.id)||e.set(t.id,n)},eo=function(e,t){e.cache=t,e.activated=!0,Ki(t)&&to(e,t)},to=function(e,t){return Xi(void 0,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))}))};!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(Yi||(Yi={}));var no=function(){return no=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},no.apply(this,arguments)},ro=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},io=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},oo=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function so(e,t,n){var r;if(t.length>0){var i=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===mi.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=Gi(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),o=no(no({},i),{constr:e});r=i.isAsync?function(e){return ro(this,void 0,void 0,(function(){var t,n;return io(this,(function(r){switch(r.label){case 0:return[4,co(e.constructorInjections)];case 1:return t=r.sent(),[4,co(e.propertyInjections)];case 2:return n=r.sent(),[2,ao(no(no({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(o):ao(o)}else r=new e;return r}function ao(e){var t,n=new((t=e.constr).bind.apply(t,oo([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var i=t.target.identifier,o=e.propertyInjections[r];t.target.isOptional()&&void 0===o||(n[i]=o)})),n}function co(e){return ro(this,void 0,void 0,(function(){var t,n,r,i;return io(this,(function(o){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]}))}))}function uo(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(x,e)){var i=Reflect.getMetadata(x,e);try{return null===(r=(n=t)[i.value])||void 0===r?void 0:r.call(n)}catch(o){if(o instanceof Error)throw new Error(f(e.name,o.message))}}}(e,t);return Ki(n)?n.then((function(){return t})):t}function lo(e,t){e.scope!==vi.Singleton&&function(e,t){var n="Class cannot be instantiated in "+(e.scope===vi.Request?"request":"transient")+" scope.";if("function"==typeof e.onDeactivation)throw new Error(v(t.name,n));if(Reflect.hasMetadata(T,t))throw new Error(g(t.name,n))}(e,t)}var po=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},ho=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},fo=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),o=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(i&&o)return r.map((function(t){return fo(e)(t)}));if(!t.target.isOptional()||0!==n.length){var s=n[0];return mo(e,t,s)}}},go=function(e,t){var n=function(e){switch(e.type){case yi.Factory:return{factory:e.factory,factoryType:Yi.Factory};case yi.Provider:return{factory:e.provider,factoryType:Yi.Provider};case yi.DynamicValue:return{factory:e.dynamicValue,factoryType:Yi.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}}(e);return function(e,t){try{return e()}catch(n){throw Ei(n)&&(n=t()),n}}((function(){return n.factory.bind(e)(t)}),(function(){return new Error((e=n.factoryType,r=t.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings with service identifier '"+r+"'."));var e,r}))},vo=function(e,t,n){var r,i=t.childRequests;switch(function(e){var t=null;switch(e.type){case yi.ConstantValue:case yi.Function:t=e.cache;break;case yi.Constructor:case yi.Instance:t=e.implementationType;break;case yi.DynamicValue:t=e.dynamicValue;break;case yi.Provider:t=e.provider;break;case yi.Factory:t=e.factory}if(null===t){var n=Ri(e.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case yi.ConstantValue:case yi.Function:r=n.cache;break;case yi.Constructor:r=n.implementationType;break;case yi.Instance:r=function(e,t,n,r){lo(e,t);var i=so(t,n,r);return Ki(i)?i.then((function(e){return uo(t,e)})):uo(t,i)}(n,n.implementationType,i,fo(e));break;default:r=go(n,t.parentContext)}return r},yo=function(e,t,n){var r=function(e,t){return t.scope===vi.Singleton&&t.activated?t.cache:t.scope===vi.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===vi.Singleton&&eo(t,n),t.scope===vi.Request&&Ji(e,t,n)}(e,t,r=n()),r},mo=function(e,t,n){return yo(e,n,(function(){var r=vo(e,t,n);return r=Ki(r)?r.then((function(e){return bo(t,n,e)})):bo(t,n,r)}))};function bo(e,t,n){var r,i=_o(e.parentContext,t,n),o=Eo(e.parentContext.container),s=o.next();do{r=s.value;var a=e.parentContext,c=e.serviceIdentifier,u=Ao(r,c);i=Ki(i)?So(u,a,i):wo(u,a,i),s=o.next()}while(!0!==s.done&&!$i(r).hasKey(e.serviceIdentifier));return i}var _o=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},wo=function(e,t,n){for(var r=e.next();!r.done;){if(Ki(n=r.value(t,n)))return So(e,t,n);r=e.next()}return n},So=function(e,t,n){return po(void 0,void 0,void 0,(function(){var r,i;return ho(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=e.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=o.sent(),i=e.next(),[3,2];case 4:return[2,r]}}))}))},Ao=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},Eo=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};var Ro=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||Ro(n,t))},Oo=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new I(e,t),n}},xo=Oo(m),To=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},Co=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new Io(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=xo(e),new Io(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged())},new Io(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=Oo(e)(t),new Io(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&To(e)(t.parentRequest)},new Io(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&xo(e)(t.parentRequest)},new Io(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Oo(e)(t)(n.parentRequest)},new Io(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&Ro(t,To(e))},new Io(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!Ro(t,To(e))},new Io(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&Ro(t,xo(e))},new Io(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!Ro(t,xo(e))},new Io(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&Ro(n,Oo(e)(t))},new Io(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!Ro(n,Oo(e)(t))},new Io(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&Ro(t,e)},new Io(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!Ro(t,e)},new Io(this._binding)},e}(),Io=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new Co(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new Co(this._binding)},e}(),Po=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Co(this._binding),this._bindingOnSyntax=new Io(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),No=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=vi.Request,new Po(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=vi.Transient,new Po(this._binding)},e}(),jo=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new Co(this._binding),this._bindingOnSyntax=new Io(this._binding),this._bindingInSyntax=new No(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),ko=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=yi.Instance,this._binding.implementationType=e,new jo(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=yi.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=yi.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new jo(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=yi.Constructor,this._binding.implementationType=e,this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=yi.Factory,this._binding.factory=e,this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=yi.Function,this._binding.scope=vi.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=yi.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=yi.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new Po(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=yi.Provider,this._binding.provider=e,this._binding.scope=vi.Singleton,new Po(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),Zo=function(){function e(){}return e.of=function(t,n,r,i,o){var s=new e;return s.bindings=t,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s},e}();var Lo=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(o);if(null==t)throw new Error(o);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(o);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(s)},e.prototype.remove=function(e){if(null==e)throw new Error(o);if(!this._map.delete(e))throw new Error(s)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var i=e.hasKey(n)?e.get(n):void 0;if(void 0!==i){var o=r.filter((function(e){return!i.some((function(t){return e===t}))}));t._setValue(n,o)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,i){for(var o=[],s=0,a=r;s<a.length;s++){var c=a[s];e(c)?n.push(c):o.push(c)}t._setValue(i,o)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(o);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,"object"==typeof(r=e)&&null!==r&&"clone"in r&&"function"==typeof r.clone?e.clone():e);var r}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),Do=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new Lo,onDeactivations:new Lo}},e}(),Mo=function(){return Mo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mo.apply(this,arguments)},Fo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},Uo=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Bo=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Vo=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===t.defaultScope)t.defaultScope=vi.Transient;else if(t.defaultScope!==vi.Singleton&&t.defaultScope!==vi.Transient&&t.defaultScope!==vi.Request)throw new Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=_i(),this._bindingDictionary=new Lo,this._snapshots=[],this._middleware=null,this._activations=new Lo,this._deactivations=new Lo,this.parent=null,this._metadataReader=new Si,this._moduleActivationStore=new Do}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new e,s=Bo([t,n],r,!0).map((function(e){return $i(e)})),a=$i(o);return s.forEach((function(e){var t;t=a,e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))})),o},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fo(this,void 0,void 0,(function(){var t,n,r,i,o;return Uo(this,(function(s){switch(s.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],o=t(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fo(this,void 0,void 0,(function(){var t,n,r,i;return Uo(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(r=n[t],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||vi.Transient,n=new wi(e,t);return this._bindingDictionary.add(e,n),new ko(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return Fo(this,void 0,void 0,(function(){return Uo(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return Fo(this,void 0,void 0,(function(){var t;return Uo(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new Lo},e.prototype.unbindAllAsync=function(){return Fo(this,void 0,void 0,(function(){var e,t=this;return Uo(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new Lo,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,m,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=function(e,t,n,r){var i=new ki(mi.Variable,"",t,new I(n,r)),o=new Ii(e);return new Vi(t,o,null,[],i)}(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(Zo.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return Fo(this,void 0,void 0,(function(){var t;return Uo(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return Fo(this,void 0,void 0,(function(){var r;return Uo(this,(function(i){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,m,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,m,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,m,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,m,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){var n,r;if(Reflect.hasMetadata(T,e))return null===(r=(n=t)[Reflect.getMetadata(T,e).value])||void 0===r?void 0:r.call(n)},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var i=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(Ki(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(Ki(o))return this._handleDeactivationError(o,r)}catch(s){if(s instanceof Error)throw new Error(v(r.name,s.message))}},e.prototype._handleDeactivationError=function(e,t){return Fo(this,void 0,void 0,(function(){var n;return Uo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:if((n=r.sent())instanceof Error)throw new Error(v(t.name,n.message));return[3,3];case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var i=r.value(e);if(Ki(i))return i.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return Fo(this,void 0,void 0,(function(){var n;return Uo(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.bind(r);return t(i,n),i}},r=function(n){return function(r){var i=e.rebind(r);return t(i,n),i}},i=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},o=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(t){return{bindFunction:n(t),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:i(t),onDeactivationFunction:o(t),rebindFunction:r(t),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}}}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=Mo(Mo({},e),{contextInterceptor:function(e){return e},targetType:mi.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(Gi(t))throw new Error("You are attempting to construct '"+e.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=Wi(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return function(e){return fo(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n))}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return Ki(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(Ki(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return Fo(this,void 0,void 0,(function(){var t=this;return Uo(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return Fo(this,void 0,void 0,(function(){return Uo(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error("Could not unbind serviceIdentifier: "+Ri(e))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var i=e.onDeactivation(t);if(Ki(i))return i.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return Fo(this,void 0,void 0,(function(){return Uo(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}();class ParameterBag{constructor(e={}){this.parameters=void 0,this.resolved=!1,this.parameters=new Map(Object.entries(e))}get(e){if(!this.has(e))throw new Error(`Parameter ${String(e)} not found`);return this.parameters.get(e)}set(e,t){this.parameters.set(e,t)}add(e={}){for(const[t,n]of Object.entries(e))this.set(t,n)}remove(e){this.parameters.delete(e)}has(e){return this.parameters.has(e)}all(){return Object.fromEntries(this.parameters.entries())}clear(){this.parameters.clear()}resolve(){this.resolved||(this.resolved=!0)}}class FrozenParameterBag extends ParameterBag{add(e){throw new Error("Impossible to call add() on a frozen ParameterBag.")}clear(){throw new Error("Impossible to call clear() on a frozen ParameterBag.")}set(e,t){throw new Error("Impossible to call set() on a frozen ParameterBag.")}remove(e){throw new Error("Impossible to call remove() on a frozen ParameterBag.")}}class Container{constructor(e){this.container=void 0,this.compiled=!1,this.parameterBag=void 0,this.parameterBag=null!=e?e:new ParameterBag,this.container=new Vo({defaultScope:"Singleton"})}set(e,t){if(this.container.isBound(e))throw new Error(`The "${String(e)}" service is already initialized, you cannot replace it.`);"object"==typeof t?this.container.bind(e).toConstantValue(t):this.container.bind(e).to(t)}alias(e,t){this.container.bind(e).toService(t)}get(e){return this.container.get(e)}has(e){return this.container.isBound(e)}getParameterBag(){return this.parameterBag}getParameter(e){return this.parameterBag.get(e)}hasParameter(e){return this.parameterBag.has(e)}setParameter(e,t){this.parameterBag.set(e,t)}getContainer(){return this.container}isCompiled(){return this.compiled}compile(){this.parameterBag.resolve(),this.parameterBag=new FrozenParameterBag(this.parameterBag.all());for(const[e,t]of Object.entries(this.parameterBag.all())){if(this.has(e))throw new Error(`Service with id ${String(e)} already exists. Cannot assign a parameter with this name`);this.container.bind(e).toConstantValue(t)}this.compiled=!0}}class Definition{constructor(e,t=[]){this.cls=void 0,this.tags=new Set,this.calls=[],e&&this.setClass(e)}getClass(){if(!this.cls)throw new Error("Class name must be defined");return this.cls}setClass(e){return this.cls=e,this}setMethodCalls(e=[]){for(const t of e)this.addMethodCall(t.method,t.parameters);return this}addMethodCall(e,t=[]){var n;return null==(n=this.calls)||n.push({method:e,parameters:t}),this}removeMethodCall(e){for(let t=0;t<this.calls.length;t++){this.calls[t].method===e&&this.calls.splice(t,1)}return this}hasMethodCall(e){for(let t=0;t<this.calls.length;t++){if(this.calls[t].method===e)return!0}return!1}getMethodCalls(){return this.calls}setTags(e){return this.tags=new Set(e),this}hasTag(e){return this.tags.has(e)}getTags(){return[...this.tags]}addTag(e){return this.tags.add(e),this}clearTag(e){return this.tags.delete(e),this}clearTags(){return this.tags=new Set,this}}class Reference{constructor(e){this.id=e}getId(){return this.id}}class ContainerBuilder extends Container{constructor(...e){super(...e),this.definitions=new Map}compile(){super.compile();for(const[e,t]of this.definitions){const n=this.container.bind(e).to(t.getClass());if(t.getMethodCalls().length>0&&n.onActivation(((e,n)=>{const r=n;for(const i of t.getMethodCalls()){if(!(i.method in r))throw new Error(`Method ${i.method} doesn't exist on object of type ${r.constructor.name}`);for(let t=0;t<i.parameters.length;t++)i.parameters[t]instanceof Reference&&(i.parameters[t]=e.container.get(i.parameters[t].getId()));r[i.method].apply(r,i.parameters)}return r})),t.getTags().length>0)for(const r of t.getTags())this.container.bind(r).toService(e)}}set(e,t){if(this.isCompiled())throw new Error("Container is already compiled");return super.set(e,t)}register(e,t){return this.setDefinition(e,new Definition(t))}getDefinitions(){return Object.fromEntries(this.definitions.entries())}addDefinitions(e){for(const t of e)this.setDefinition(t.id,t.definition)}setDefinition(e,t){if(this.isCompiled())throw new Error("Adding definition to a compiled container is not allowed.");return this.definitions.set(e,t),t}hasDefinition(e){return this.definitions.has(e)}getDefinition(e){if(!this.hasDefinition(e))throw new Error(`You have requested a non-existent service ${e.toString()}`);return this.definitions.get(e)}}class kernel_Kernel{constructor(e=!1){this.booted=!1,this.container=void 0,this.debug=e}getContainer(){if(!this.container)throw new Error("Cannot retrieve the container from a non-booted kernel.");return this.container}boot(){this.booted||(this.container=this.buildContainer(),this.container.compile())}getKernelParameters(){return{"kernel.debug":this.debug}}buildContainer(){const e=this.getContainerBuilder();return this.build(e),e}getContainerBuilder(){const e=new ContainerBuilder;return e.getParameterBag().add(this.getKernelParameters()),e}build(e){}}class Message{constructor(e,t){this.headers=void 0,this.uri=void 0,this.uri=e instanceof URL?e:new URL(e),this.headers=new Headers(t)}getHeaders(){return this.headers}hasHeader(e){return this.headers.has(e.toLowerCase())}withHeader(e,t){t=Array.isArray(t)?t:[t];for(const n of t)this.headers.set(e.toLowerCase(),n);return this}withAddedHeader(e,t){t=Array.isArray(t)?t:[t];for(const n of t)this.headers.append(e.toLowerCase(),n);return this}withoutHeader(e){return this.headers.delete(e.toLowerCase()),this}getUri(){return this.uri}withUri(e){return this.uri=e,this}}class request_Request extends Message{constructor(e,t,n,r){super(t,n),this.body=void 0,this.method=void 0,this.method=e,this.body=null!=r?r:null}getMethod(){return this.method}withMethod(e){return this.method=e,this}getBody(){return this.body}withBody(e){return this.body=e,this}}class Response extends Message{constructor(e=200,t,n,r,i,o){var s;super(t,n),this.statusCode=void 0,this.body=void 0,this.jsonBody=void 0,this.reasonPhrase=void 0,this.statusCode=e,this.body=null!=r?r:null,this.jsonBody=null!=i?i:Promise.resolve(null),this.reasonPhrase=null!=(s=null!=o?o:Response.PHRASES[e])?s:""}getStatusCode(){return this.statusCode}getReasonPhrase(){return this.reasonPhrase}withStatus(e,t){var n;return this.statusCode=e,this.reasonPhrase=null!=(n=null!=t?t:Response.PHRASES[e])?n:"",this}getBody(){return this.body}withBody(e){return this.body=e,this}json(){return this.jsonBody}withJson(e){return this.jsonBody=e,this}}Response.PHRASES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-status",208:"Already Reported",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",511:"Network Authentication Required"};const $o=(...e)=>{const t=new Headers;for(const n of e)n&&(n instanceof Headers?n.forEach(((e,n)=>{t.set(n,e)})):Array.isArray(n)?n.forEach((([e,n])=>{t.set(e,n)})):"object"==typeof n&&Object.entries(n).forEach((([e,n])=>{t.set(e,n)})));return t};var qo,zo;let Ho=M()(qo=Reflect.metadata("design:type",Function)(qo=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientOptions?Object:HttpClientOptions])(qo=Reflect.metadata("design:type",Function)(qo=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientOptions?Object:HttpClientOptions])((zo=class HttpClient{constructor(e={}){this.options={},this.options=Object.assign({},HttpClient.defaultOptions,e,{headers:$o(HttpClient.defaultOptions.headers,e.headers)})}async sendRequest(e,t){return fetch(e.getUri().toString(),Object.assign({},this.options,{headers:$o(this.options.headers,e.getHeaders()),body:e.getBody(),method:e.getMethod(),credentials:t||this.options.credentials})).then((async function(e){return new Response(e.status,e.url,e.headers,e.body,e.clone().json().catch((()=>null)),e.statusText)}))}createRequest(e,t,n){var r;const i=new request_Request(e,this.createUri(t)),o=Object.assign({},n);let s=null==n?void 0:n.body;if(void 0!==(null==o?void 0:o.json)){if(void 0!==s&&""!==s)throw Error('Define either the "json" or the "body" option, setting both is not supported.');s=JSON.stringify(o.json),delete o.json,i.hasHeader("content-type")||i.withHeader("content-type","application/json")}if("[object Object]"===Object.prototype.toString.call(s)&&(s=new URLSearchParams(s).toString(),i.hasHeader("content-type")||i.withHeader("content-type","application/x-www-form-urlencoded")),i.hasHeader("accept")||i.withHeader("accept","*/*"),["GET","HEAD"].includes(e)&&s)throw new Error("Request with GET/HEAD method cannot have body");return i.withBody(null!=(r=s)?r:null),i}createUri(e){return new URL(e,this.options.baseUri)}withOptions(e){return void 0!==e.headers&&(e.headers=new Headers(e.headers)),this.options=Object.assign({},HttpClient.defaultOptions,e),this}},zo.defaultOptions={},qo=zo))||qo)||qo)||qo)||qo)||qo;var Wo;let Ko=M()(Wo=Reflect.metadata("design:type",Function)(Wo=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Wo=Reflect.metadata("design:type",Function)(Wo=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Wo=class SwoopCallbackOnlyIntegration{constructor(e,t){this.browserObjectModel=e,this.userContext=t}async run(e){var t;const n=this.browserObjectModel.getWindow()._npi_cb;if(!this.supports(e)||void 0===n)return;const r=null==(t=this.userContext.getNpis().find((e=>e.getDestination()===Q.SWOOP)))?void 0:t.getEncryptedNumber();if(r)throw n(r),new IntegrationStoppedExecutionException(this)}supports(e){return e.getSettings().getSwoopIntegrationType()===ee.CALLBACK_ONLY}})||Wo)||Wo)||Wo)||Wo)||Wo;class IntegrationRunException extends Error{constructor(e,t){super(),this.integration=e,this.adSet=t}getIntegration(){return this.integration}getAdSet(){return this.adSet}}var Go;let Yo=M()(Go=Reflect.metadata("design:type",Function)(Go=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Go=Reflect.metadata("design:type",Function)(Go=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Go=class SwoopDefaultIntegration{constructor(e,t){this.browserObjectModel=e,this.userContext=t}async run(e){var t;if(!this.supports(e))return;const n=null==(t=this.userContext.getNpis().find((e=>e.getDestination()===Q.SWOOP)))?void 0:t.getEncryptedNumber();if(!n)return;const r=e.getSettings().getSwoopScriptUrl(),i=e.getSettings().getSwoopId();if(!r||!i)throw new IntegrationRunException(this,e);const o=this.browserObjectModel.getDocument().createElement("script");o.src=r,o.id="swoop_sdk",o.dataset.domain=i,o.dataset.npi=n,this.browserObjectModel.getDocument().getElementsByTagName("body")[0].appendChild(o)}supports(e){return e.getSettings().getSwoopIntegrationType()===ee.DEFAULT}})||Go)||Go)||Go)||Go)||Go;var Xo;let Qo=M()(Xo=Reflect.metadata("design:type",Function)(Xo=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Xo=Reflect.metadata("design:type",Function)(Xo=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt,void 0===se?Object:se])(Xo=class SwoopPassthroughIntegration extends Yo{constructor(e,t){super(e,t),this.browserObjectModel=e,this.userContext=t}supports(e){return e.getSettings().getSwoopIntegrationType()===ee.PASSTHROUGH}})||Xo)||Xo)||Xo)||Xo)||Xo;var Jo;let es=M()(Jo=Reflect.metadata("design:type",Function)(Jo=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii])(Jo=Reflect.metadata("design:type",Function)(Jo=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii])(Jo=class AbstractNpiSource{constructor(e){this.apiClient=e}supports(e){var t;return(null!=(t=e.getSettings().getNpiSources())?t:[]).includes(this.getType())}async detect(e){const t=await this.process(e);return t&&(t.encryptedNpi||t.aimId)?this.apiClient.processNpi(t,e.getId()):[]}})||Jo)||Jo)||Jo)||Jo)||Jo;var ts;let ns=M()(ts=Reflect.metadata("design:type",Function)(ts=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===Wt?Object:Wt])(ts=Reflect.metadata("design:type",Function)(ts=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===Wt?Object:Wt])(ts=class DmdNpiSource extends es{constructor(e,t){super(e),this.apiClient=e,this.browserObjectModel=t}getType(){return X.DMD}async process(e){var t;const n=null==(t=e.getSettings().getNpiDetectors())||null==(t=t[this.getType()])?void 0:t.url;if(!n)return{encryptedNpi:void 0,aimId:void 0,source:this.getType()};const r=new URL(n);return r.searchParams.set("client-origin",this.browserObjectModel.getWindow().location.origin),r.searchParams.set("timestamp",Date.now().toString()),new Promise((e=>{const t=({origin:t,data:o})=>{if(new URL(n).pathname="",t.replace(/\/$/,"")!==r.toString().replace(/\/$/,""))return;const s=null==o?void 0:o.aimId;clearTimeout(i),e({aimId:s,encryptedNpi:void 0,source:this.getType()})},i=setTimeout((()=>{this.browserObjectModel.getWindow().removeEventListener("message",t,!1),e({aimId:void 0,encryptedNpi:void 0,source:this.getType()})}),100);this.browserObjectModel.getWindow().addEventListener("message",t,!1);const o=this.browserObjectModel.getDocument().createElement("iframe");o.setAttribute("style","display:none!important"),o.setAttribute("src",r.toString()),this.browserObjectModel.getDocument().body.appendChild(o)}))}})||ts)||ts)||ts)||ts)||ts;var rs;let is=M()(rs=function(e,t){return U()(e,void 0,2)}(rs=Reflect.metadata("design:type",Function)(rs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===Ho?Object:Ho,void 0===H?Object:H])(rs=Reflect.metadata("design:type",Function)(rs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===Ho?Object:Ho,void 0===H?Object:H])(rs=class LhkNpiSource extends es{constructor(e,t,n){super(e),this.httpClient=t,this.logger=n}getType(){return X.LHK}async process(e){var t;const n=null==(t=e.getSettings().getNpiDetectors())||null==(t=t[this.getType()])?void 0:t.url;if(!n)return{encryptedNpi:void 0,aimId:void 0,source:this.getType()};try{const e=new URL(n);e.searchParams.set("test","true");const t=this.httpClient.createRequest("GET",e);t.withHeader("X-Session-Id","test");const r=await this.httpClient.sendRequest(t,"include"),i=await r.json();return{source:this.getType(),encryptedNpi:i.encrypted?i.encrypted:void 0}}catch(i){var r;return null==(r=this.logger)||r.error(i),{encryptedNpi:void 0,aimId:void 0,source:this.getType()}}}})||rs)||rs)||rs)||rs)||rs)||rs;var os,ss;let as=M()(os=Reflect.metadata("design:type",Function)(os=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt])(os=Reflect.metadata("design:type",Function)(os=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt])((ss=class DoiProvider{constructor(e){this.browserObjectModel=e}provide(){for(const t of DoiProvider.selectors){var e;const n=this.browserObjectModel.getDocument().querySelector(t);if(!n)continue;const r=null!=(e=n.getAttribute("content"))?e:n.textContent;if(r)return r}return null}},ss.selectors=['meta[name="citation_doi" i]'],os=ss))||os)||os)||os)||os)||os;var cs;let us=M()(cs=Reflect.metadata("design:type",Function)(cs=Reflect.metadata("design:paramtypes",[void 0===as?Object:as])(cs=Reflect.metadata("design:type",Function)(cs=Reflect.metadata("design:paramtypes",[void 0===as?Object:as])(cs=class DoiMetadataProcessor{constructor(e){this.doiProvider=e}async process(e){e.setDoi(this.doiProvider.provide())}})||cs)||cs)||cs)||cs)||cs;var ls,ds;let ps=M()(ls=Reflect.metadata("design:type",Function)(ls=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt])(ls=Reflect.metadata("design:type",Function)(ls=Reflect.metadata("design:paramtypes",[void 0===Wt?Object:Wt])((ds=class TitleProvider{constructor(e){this.browserObjectModel=e}provide(){for(const t of TitleProvider.selectors){var e;const n=this.browserObjectModel.getDocument().querySelector(t);if(!n)continue;const r=null!=(e=n.getAttribute("content"))?e:n.textContent;if(r)return r}return null}},ds.selectors=['meta[name="citation_title" i]','meta[name="DC.title" i]','meta[name="og:title" i]','meta[property="og:title" i]','meta[name="twitter:title" i]','meta[name="title" i]',"title"],ls=ds))||ls)||ls)||ls)||ls)||ls;var hs;let fs=M()(hs=Reflect.metadata("design:type",Function)(hs=Reflect.metadata("design:paramtypes",[void 0===ps?Object:ps])(hs=Reflect.metadata("design:type",Function)(hs=Reflect.metadata("design:paramtypes",[void 0===ps?Object:ps])(hs=class TitleMetadataProcessor{constructor(e){this.titleProvider=e}async process(e){e.setTitle(this.titleProvider.provide())}})||hs)||hs)||hs)||hs)||hs;class AdSlotContainerItem{constructor(){this.id=void 0,this.title=void 0,this.subtitle=null,this.campaignId=void 0,this.publicationId=void 0,this.url=void 0,this.clickUrl=void 0,this.impressionUrl=void 0,this.linkingType=void 0,this.authors=null,this.publicationName=null,this.publicationAbbreviatedName=null,this.publicationDate=null,this.adSlotContainer=void 0}getId(){if(!this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getTitle(){var e;return null!=(e=this.title)?e:null}getSubtitle(){var e;return null!=(e=this.subtitle)?e:null}getUrl(){var e;return null!=(e=this.url)?e:null}getClickUrl(){var e;return null!=(e=this.clickUrl)?e:null}getImpressionUrl(){var e;return null!=(e=this.impressionUrl)?e:null}getCampaignId(){var e;return null!=(e=this.campaignId)?e:null}getPublicationId(){var e;return null!=(e=this.publicationId)?e:null}getAuthors(){var e;return null!=(e=this.authors)?e:null}getPublicationName(){var e;return null!=(e=this.publicationName)?e:null}getPublicationAbbreviatedName(){var e;return null!=(e=this.publicationAbbreviatedName)?e:null}getPublicationDate(){var e;return null!=(e=this.publicationDate)?e:null}getLinkingType(){var e;return null!=(e=this.linkingType)?e:null}getAdSlotContainer(){var e;return null!=(e=this.adSlotContainer)?e:null}setAdSlotContainer(e){return this.adSlotContainer=e,this}}var gs;let vs=M()(gs=class AdSlotContainerItemResolver{resolve(e){const t=new AdSlotContainerItem;return hn(t,{id:e.id,title:e.title,subtitle:e.subtitle,publicationName:e.publicationName,publicationAbbreviatedName:e.publicationAbbreviatedName,publicationDate:e.publicationDate,campaignId:e.campaignId,publicationId:e.publicationId,url:e.url,clickUrl:e.clickUrl,impressionUrl:e.impressionUrl,linkingType:e.linkingType,authors:e.authors}),t}})||gs;var ys;let ms=M()(ys=Reflect.metadata("design:type",Function)(ys=Reflect.metadata("design:paramtypes",[void 0===se?Object:se])(ys=Reflect.metadata("design:type",Function)(ys=Reflect.metadata("design:paramtypes",[void 0===se?Object:se])(ys=class AdSlotConstraintNpiValidator{constructor(e){this.userContext=e}supports(e){return e.getType()===re.NPI}validate(e){var t;if(!this.userContext.hasNpi())return!1;if(null!=(t=e.getConstraint())&&t.any)return!0;return this.userContext.getNpis().filter((e=>null!==e.getEncryptedNumber())).map((e=>e.getEncryptedNumber())).some((t=>{var n,r;return(null!=(n=null==(r=e.getConstraint())?void 0:r.values)?n:[]).includes(t)}))}})||ys)||ys)||ys)||ys)||ys;var bs;let _s=M()(bs=function(e,t){return U()(e,void 0,2)}(bs=Reflect.metadata("design:type",Function)(bs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===$?Object:$,void 0===H?Object:H])(bs=Reflect.metadata("design:type",Function)(bs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===$?Object:$,void 0===H?Object:H])(bs=class AdSetSubscriber{constructor(e,t,n){this.apiClient=e,this.applicationContext=t,this.logger=n}getSubscribedEvents(){return{[q.AD_SET_PRE_RESOLVE]:"onPreResolve",[q.AD_SET_POST_RESOLVE]:"onPostResolve"}}async onPreResolve(e){var t;null==(t=this.logger)||t.debug(`Ad set ${e.getId()} onPreRender`)}async onPostResolve(e){var t;null==(t=this.logger)||t.debug(`Ad set ${e.getId()} onPostRender`)}})||bs)||bs)||bs)||bs)||bs)||bs;var ws;let Ss=M()(ws=function(e,t){return U()(e,void 0,4)}(ws=Reflect.metadata("design:type",Function)(ws=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===vs?Object:vs,void 0===se?Object:se,void 0===$?Object:$,void 0===H?Object:H])(ws=Reflect.metadata("design:type",Function)(ws=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===vs?Object:vs,void 0===se?Object:se,void 0===$?Object:$,void 0===H?Object:H])(ws=class AdSlotContainerSubscriber{constructor(e,t,n,r,i){this.apiClient=e,this.adSlotElementItemResolver=t,this.userContext=n,this.applicationContext=r,this.logger=i}getSubscribedEvents(){return{[q.AD_SLOT_CONTAINER_PRE_RENDER]:"onPreRender",[q.AD_SLOT_CONTAINER_POST_RENDER]:"onPostRender",[q.AD_SLOT_CONTAINER_NOT_FOUND]:"onNotFound",[q.AD_SLOT_CONTAINER_ITEM_VIEW]:"onItemView",[q.AD_SLOT_CONTAINER_VIEW]:"onView"}}async onPreRender(e){var t,n,r,i,o;const s=e.getAdSlotContainer(),a=null==(t=e.getAdSlotContainer())?void 0:t.getAdSlot();if(!s||!a)return;const c=await this.apiClient.getRecommendations(a.getId(),{npis:this.userContext.getNpis().filter((e=>null!==e.getEncryptedNumber())).map((e=>({encryptedNumber:e.getEncryptedNumber(),source:e.getSource(),destination:e.getDestination()}))),sourceMetadata:{title:null!=(n=null==(r=this.applicationContext.getMetadata())?void 0:r.getTitle())?n:void 0,doi:null!=(i=null==(o=this.applicationContext.getMetadata())?void 0:o.getDoi())?i:void 0},startTime:this.applicationContext.getStartTime()});for(const u of c)s.addItem(this.adSlotElementItemResolver.resolve(u));e.setItems(c)}async onPostRender(e){var t,n,r,i,o;null==(t=this.logger)||t.debug(`Ad slot Element for Ad Slot ${null==(n=e.getAdSlotContainer())||null==(n=n.getAdSlot())?void 0:n.getId()} onPostRender`);const s=null==(r=e.getAdSlotContainer())?void 0:r.getAdSlot();s&&await this.apiClient.registerEvent(s.getId(),{eventType:ie.AD_SLOT_LOAD,placementIndex:null!=(i=null==(o=e.getAdSlotContainer())?void 0:o.getIndex())?i:0,startTime:this.applicationContext.getStartTime(),npis:this.userContext.getNpis().filter((e=>null!==e.getEncryptedNumber())).map((e=>({encryptedNumber:e.getEncryptedNumber(),source:e.getSource(),destination:e.getDestination()})))})}async onNotFound(e){var t;null==(t=this.logger)||t.debug(`AdSlotElement id ${e.getId()} not found. Used datasetId ${e.getDatasetId()}`)}async onItemView(e){var t,n,r,i,o;const s=null==(t=e.getAdSlotContainerItem().getAdSlotContainer())?void 0:t.getAdSlot(),a=e.getAdSlotContainerItem().getImpressionUrl();var c,u;if(!s)return void(null==(c=this.logger)||c.error(`AdSlot not set for AdSlotContainerItem with id ${e.getAdSlotContainerItem().getId()}`));if(!a)return void(null==(u=this.logger)||u.error(`Url not set for AdSlotContainerItem with id ${e.getAdSlotContainerItem().getId()}`));const l=null!=(n=a.replace(/\/$/,"").split("/").pop())?n:"";await this.apiClient.registerEvent(s.getId(),{eventType:ie.AD_SLOT_ITEM_IMPRESSION,placementIndex:null!=(r=null==(i=e.getAdSlotContainerItem().getAdSlotContainer())?void 0:i.getIndex())?r:0,encryptedPayload:l,startTime:this.applicationContext.getStartTime()}),null==(o=this.logger)||o.debug(`AdSlotContainerItem with id ${e.getAdSlotContainerItem().getId()} viewed`)}async onView(e){var t,n,r,i;const o=null==(t=e.getAdSlotContainer())?void 0:t.getAdSlot();var s;o?(await this.apiClient.registerEvent(o.getId(),{eventType:ie.AD_SLOT_VIEW,placementIndex:null!=(n=null==(r=e.getAdSlotContainer())?void 0:r.getIndex())?n:0,startTime:this.applicationContext.getStartTime(),npis:this.userContext.getNpis().filter((e=>null!==e.getEncryptedNumber())).map((e=>({encryptedNumber:e.getEncryptedNumber(),source:e.getSource(),destination:e.getDestination()})))}),null==(i=this.logger)||i.debug(`AdSlotContainer with index ${e.getAdSlotContainer().getIndex()} viewed`)):null==(s=this.logger)||s.error(`AdSlot not set for AdSlotContainer with index ${e.getAdSlotContainer().getIndex()}`)}})||ws)||ws)||ws)||ws)||ws)||ws;var As;let Es=M()(As=function(e,t){return U()(e,void 0,0)}(As=Reflect.metadata("design:type",Function)(As=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(As=Reflect.metadata("design:type",Function)(As=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(As=class AdSlotSubscriber{constructor(e){this.logger=e}getSubscribedEvents(){return{[q.AD_SLOT_PRE_RENDER]:"onPreRender",[q.AD_SLOT_POST_RENDER]:"onPostRender"}}async onPreRender(e){var t;null==(t=this.logger)||t.debug(`Ad slot ${e.getAdSlot().getId()} onPreRender`)}onPostRender(e){var t;null==(t=this.logger)||t.debug(`Ad slot ${e.getAdSlot().getId()} onPostRender`)}})||As)||As)||As)||As)||As)||As;var Rs;let Os=M()(Rs=function(e,t){return U()(e,void 0,0)}(Rs=Reflect.metadata("design:type",Function)(Rs=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Rs=Reflect.metadata("design:type",Function)(Rs=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Rs=class ApplicationSubscriber{constructor(e){this.logger=e}getSubscribedEvents(){return{[q.APPLICATION_PRE_RUN]:"onApplicationPreRun",[q.APPLICATION_POST_RUN]:"onApplicationPostRun",[q.APPLICATION_PRE_INIT]:"onApplicationPreInit",[q.APPLICATION_POST_INIT]:"onApplicationPostInit"}}onApplicationPreRun(e){var t;null==(t=this.logger)||t.debug("Pre run application")}onApplicationPostRun(e){var t;null==(t=this.logger)||t.debug("Post run application")}onApplicationPreInit(e){var t;null==(t=this.logger)||t.debug("Pre init application")}onApplicationPostInit(e){var t;null==(t=this.logger)||t.debug("Post init application")}})||Rs)||Rs)||Rs)||Rs)||Rs)||Rs;var xs;let Ts=M()(xs=function(e,t){return U()(e,void 0,2)}(xs=Reflect.metadata("design:type",Function)(xs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===se?Object:se,void 0===H?Object:H])(xs=Reflect.metadata("design:type",Function)(xs=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===se?Object:se,void 0===H?Object:H])(xs=class BackendSubscriber{constructor(e,t,n){this.apiClient=e,this.userContext=t,this.logger=n}getSubscribedEvents(){return{[q.BACKEND_EVENT]:"onBackendEvent"}}async onBackendEvent(e){var t;return null==(t=this.logger)||t.debug(`Registering event: ${e.getType()} for ad slot ${e.getAdSlotIdentifier()}`),this.apiClient.registerEvent(e.getAdSlotIdentifier(),{eventType:e.getType(),npis:this.userContext.getNpis().filter((e=>null!==e.getEncryptedNumber())).map((e=>({encryptedNumber:e.getEncryptedNumber(),source:e.getSource(),destination:e.getDestination()})))})}})||xs)||xs)||xs)||xs)||xs)||xs;var Cs;let Is=M()(Cs=function(e,t){return U()(e,void 0,0)}(Cs=Reflect.metadata("design:type",Function)(Cs=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Cs=Reflect.metadata("design:type",Function)(Cs=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Cs=class IntegrationsSubscriber{constructor(e){this.logger=e}getSubscribedEvents(){return{[q.INTEGRATION_PRE_RUN]:"onIntegrationPreRun",[q.INTEGRATION_POST_RUN]:"onIntegrationPostRun"}}onIntegrationPreRun(e){var t;null==(t=this.logger)||t.debug(`Pre run integration: ${e.getIntegration().constructor.name}`)}onIntegrationPostRun(e){var t;null==(t=this.logger)||t.debug(`Post run integration: ${e.getIntegration().constructor.name}`)}})||Cs)||Cs)||Cs)||Cs)||Cs)||Cs;var Ps;let Ns=M()(Ps=function(e,t){return U()(e,void 0,0)}(Ps=Reflect.metadata("design:type",Function)(Ps=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Ps=Reflect.metadata("design:type",Function)(Ps=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Ps=class NpiDetectionSubscriber{constructor(e){this.logger=e}getSubscribedEvents(){return{[q.NPI_PRE_DETECT]:"onPreDetect",[q.NPI_POST_DETECT]:"onPostDetect"}}async onPreDetect(e){var t;null==(t=this.logger)||t.debug(`Pre detect npi for source "${e.getSource().constructor.name}"`)}async onPostDetect(e){var t;null==(t=this.logger)||t.debug(`Post detect npi "${e.getNpi().getEncryptedNumber()}" and source "${e.getSource().constructor.name}"`)}})||Ps)||Ps)||Ps)||Ps)||Ps)||Ps;var js;let ks=M()(js=function(e,t){return U()(e,void 0,1)}(js=Reflect.metadata("design:type",Function)(js=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===H?Object:H])(js=Reflect.metadata("design:type",Function)(js=Reflect.metadata("design:paramtypes",[void 0===ii?Object:ii,void 0===H?Object:H])(js=class TelemetrySubscriber{constructor(e,t){this.apiClient=e,this.logger=t}getSubscribedEvents(){return{[q.TELEMETRY_EVENT]:"onTelemetryEvent"}}async onTelemetryEvent(e){var t;null==(t=this.logger)||t.debug(`Registering event: ${e.getId()}`)}})||js)||js)||js)||js)||js)||js;class Kernel extends kernel_Kernel{constructor(e){super(e.isDebug()),this.applicationContext=e}getKernelParameters(){return Object.assign({},super.getKernelParameters(),{"kernel.version":this.applicationContext.getVersion(),"kernel.sessionId":this.applicationContext.getSessionId()})}build(e){e.setParameter("styles",gi),e.set($,this.applicationContext),e.register(H,H).addMethodCall("setEnabled",[e.hasParameter("kernel.debug")&&e.getParameter("kernel.debug")]),e.set(se,se),e.set(li,li),e.set(Wt,Wt),e.set(zt,zt),this.registerMetadataConfiguration(e),this.registerIntegrationConfiguration(e),this.registerAdSetConfiguration(e),this.registerAdSlotConfiguration(e),this.registerNpiDetectorConfiguration(e),this.registerApiClientConfiguration(e),this.registerEventManagerConfiguration(e)}registerMetadataConfiguration(e){e.set(ps,ps),e.set(as,as),e.register(fs,fs).addTag("MetadataProcessor"),e.register(us,us).addTag("MetadataProcessor"),e.set(ci,ci)}registerIntegrationConfiguration(e){e.register(Yo,Yo).addTag("Integration"),e.register(Qo,Qo).addTag("Integration"),e.register(Ko,Ko).addTag("Integration"),e.set(Y,Y)}registerAdSetConfiguration(e){e.set(si,si),e.set(dn,dn)}registerAdSlotConfiguration(e){e.set(gn,gn),e.set(nn,nn),e.set(vs,vs),e.set(un,un),e.set(en,en),e.set(an,an),e.set(Qt,Qt),e.set(Yt,Yt),e.register(ms,ms).addTag("AdSlotConstraintValidator")}registerNpiDetectorConfiguration(e){e.set(ce,ce),e.register(is,is).addTag("NpiSource"),e.register(ns,ns).addTag("NpiSource")}registerApiClientConfiguration(e){var t,n;e.register(Ho,Ho).addMethodCall("withOptions",[{baseUri:this.applicationContext.getApplicationConfig().apiUrl}]);const r={"X-Revops-Version":this.applicationContext.getVersion(),"X-Revops-Session-Id":this.applicationContext.getSessionId(),"X-Revops-Source-Type":2,"X-Revops-Source-Url":null!=(t=this.applicationContext.getWindow().actualUrl)?t:this.applicationContext.getWindow().location.href};var i;this.applicationContext.isDebug()&&null!=(n=this.applicationContext.getApplicationConfig().userProperties)&&n.qaIp&&(r["X-Revops-QA-Ip"]=null==(i=this.applicationContext.getApplicationConfig().userProperties)?void 0:i.qaIp);e.register("backendHttpClient",Ho).addMethodCall("withOptions",[{baseUri:this.applicationContext.getApplicationConfig().apiUrl,headers:r}]),e.set(ii,ii)}registerEventManagerConfiguration(e){e.set(_s,_s),e.set(Es,Es),e.set(Ss,Ss),e.set(Os,Os),e.set(Ts,Ts),e.set(Ns,Ns),e.set(Is,Is),e.set(ks,ks),e.register(K,K).addMethodCall("addSubscriber",[new Reference(_s)]).addMethodCall("addSubscriber",[new Reference(Es)]).addMethodCall("addSubscriber",[new Reference(Ss)]).addMethodCall("addSubscriber",[new Reference(Os)]).addMethodCall("addSubscriber",[new Reference(Ts)]).addMethodCall("addSubscriber",[new Reference(Ns)]).addMethodCall("addSubscriber",[new Reference(Is)]).addMethodCall("addSubscriber",[new Reference(ks)])}}class NavigationEvent extends Event{}class Navigation{constructor(){this.events=new Map,this.initEvents()}addEventListener(e,t,n){if("navigatesuccess"!==e)throw new Error("Unsupported event type");let r=new Map;this.events.has(e)&&(r=this.events.get(e)),r.set(t,n),this.events.set(e,r)}removeEventListener(e,t,n){if(!this.events.has(e))return;const r=this.events.get(e);r&&(r.delete(t),this.events.set(e,r))}dispatchEvent(e){if(!e.type)return!1;if(!e.type||!this.events.has(e.type))return!0;for(const[t,n]of this.events.entries())if("navigatesuccess"===t)for(const[r]of n.entries())r&&r.call(this,e);return!1}initEvents(){let e=window.location.href;const t=window.setInterval((()=>{if(e===window.location.href)return;e=window.location.href;const t=new NavigationEvent("navigatesuccess",{cancelable:!0});this.dispatchEvent(t)}),100);window.addEventListener("beforeunload",(()=>{window.clearInterval(t)}))}}const Zs=e=>{var t,n;if(!e.RevopsObject)return;e.navigation||(e.navigation=new Navigation);let r={};for(const l of e[e.RevopsObject].q){const[e,t]=l;"config"===e&&"object"==typeof t&&(r=pn(r,t))}r=null!=(t=r)&&t.debug?ti.strict().parse(r):ti.parse(r),Object.freeze(r);const i=e.document.querySelector(`script[id="${r.scriptId}"]`);if(!i)throw new Error("Script Tag not found");let o=pn(r,{widgetInstallUrl:i.src,version:"0.509.0",apiUrl:"https://rev.trendmd.com"});o=null!=(n=o)&&n.debug?ni.strict().parse(o):ni.parse(o),Object.freeze(o);const s=new $(o,e),a=new Kernel(s);a.boot();const c=a.getContainer().get(H),u=a.getContainer().get(li);document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(null==c||c.info("cleanup queue"))})),"complete"!==e.document.readyState?e.addEventListener("load",(()=>{null==c||c.info("Run application on window load"),u.run()})):(null==c||c.info("Run application on complete"),u.run())}},1102:(e,t,n)=>{var r=n(1637),i=n(6380),o=n(7408),s=n(3997),a=n(4642);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},6491:(e,t,n)=>{var r=n(6073),i=n(3390),o=n(2461),s=n(8190),a=n(5670);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},5651:(e,t,n)=>{var r=n(2221)(n(9649),"Map");e.exports=r},2290:(e,t,n)=>{var r=n(6881),i=n(5089),o=n(7548),s=n(2151),a=n(1476);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,e.exports=c},7649:(e,t,n)=>{var r=n(6491),i=n(8023),o=n(9611),s=n(6138),a=n(6961),c=n(2631);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=s,u.prototype.has=a,u.prototype.set=c,e.exports=u},997:(e,t,n)=>{var r=n(9649).Symbol;e.exports=r},7830:(e,t,n)=>{var r=n(9649).Uint8Array;e.exports=r},4175:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},7296:(e,t,n)=>{var r=n(4830),i=n(7987),o=n(9546),s=n(758),a=n(5824),c=n(5739),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),d=!n&&!l&&s(e),p=!n&&!l&&!d&&c(e),h=n||l||d||p,f=h?r(e.length,String):[],g=f.length;for(var v in e)!t&&!u.call(e,v)||h&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||f.push(v);return f}},8511:(e,t,n)=>{var r=n(2618),i=n(7689);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},8902:(e,t,n)=>{var r=n(2618),i=n(7689),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},8627:(e,t,n)=>{var r=n(7689);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},2618:(e,t,n)=>{var r=n(26);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9395:(e,t,n)=>{var r=n(2289),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},1453:(e,t,n)=>{var r=n(5517)();e.exports=r},8247:(e,t,n)=>{var r=n(997),i=n(7386),o=n(4591),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},621:(e,t,n)=>{var r=n(8247),i=n(7734);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},291:(e,t,n)=>{var r=n(3331),i=n(7114),o=n(2289),s=n(7606),a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:a).test(s(e))}},9278:(e,t,n)=>{var r=n(8247),i=n(459),o=n(7734),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},6827:(e,t,n)=>{var r=n(2289),i=n(6358),o=n(4040),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},663:(e,t,n)=>{var r=n(7649),i=n(8511),o=n(1453),s=n(7480),a=n(2289),c=n(4399),u=n(434);e.exports=function e(t,n,l,d,p){t!==n&&o(n,(function(o,c){if(p||(p=new r),a(o))s(t,n,c,l,e,d,p);else{var h=d?d(u(t,c),o,c+"",t,n,p):void 0;void 0===h&&(h=o),i(t,c,h)}}),c)}},7480:(e,t,n)=>{var r=n(8511),i=n(4751),o=n(9687),s=n(8571),a=n(1685),c=n(7987),u=n(9546),l=n(71),d=n(758),p=n(3331),h=n(2289),f=n(5128),g=n(5739),v=n(434),y=n(7602);e.exports=function(e,t,n,m,b,_,w){var S=v(e,n),A=v(t,n),E=w.get(A);if(E)r(e,n,E);else{var R=_?_(S,A,n+"",e,t,w):void 0,O=void 0===R;if(O){var x=u(A),T=!x&&d(A),C=!x&&!T&&g(A);R=A,x||T||C?u(S)?R=S:l(S)?R=s(S):T?(O=!1,R=i(A,!0)):C?(O=!1,R=o(A,!0)):R=[]:f(A)||c(A)?(R=S,c(S)?R=y(S):h(S)&&!p(S)||(R=a(A))):O=!1}O&&(w.set(A,R),b(R,A,m,_,w),w.delete(A)),r(e,n,R)}}},6359:(e,t,n)=>{var r=n(9568),i=n(8296),o=n(6660);e.exports=function(e,t){return o(i(e,t,r),e+"")}},2956:(e,t,n)=>{var r=n(1914),i=n(26),o=n(9568),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=s},4830:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},9199:e=>{e.exports=function(e){return function(t){return e(t)}}},6477:(e,t,n)=>{var r=n(7830);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},4751:(e,t,n)=>{e=n.nmd(e);var r=n(9649),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},9687:(e,t,n)=>{var r=n(6477);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},8571:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},322:(e,t,n)=>{var r=n(8902),i=n(2618);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var u=t[a],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),s?i(n,u,l):r(n,u,l)}return n}},8976:(e,t,n)=>{var r=n(9649)["__core-js_shared__"];e.exports=r},6921:(e,t,n)=>{var r=n(6359),i=n(1599);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,s)}return t}))}},5517:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}},26:(e,t,n)=>{var r=n(2221),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},6954:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},5502:(e,t,n)=>{var r=n(9983);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2221:(e,t,n)=>{var r=n(291),i=n(5779);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},5506:(e,t,n)=>{var r=n(8892)(Object.getPrototypeOf,Object);e.exports=r},7386:(e,t,n)=>{var r=n(997),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(c){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},5779:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1637:(e,t,n)=>{var r=n(5586);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},6380:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7408:(e,t,n)=>{var r=n(5586),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},3997:(e,t,n)=>{var r=n(5586),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},4642:(e,t,n)=>{var r=n(5586);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},1685:(e,t,n)=>{var r=n(9395),i=n(5506),o=n(6358);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},5824:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=n??9007199254740991)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1599:(e,t,n)=>{var r=n(7689),i=n(6387),o=n(5824),s=n(2289);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?i(n)&&o(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},9983:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7114:(e,t,n)=>{var r,i=n(8976),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},6358:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6073:e=>{e.exports=function(){this.__data__=[],this.size=0}},3390:(e,t,n)=>{var r=n(8627),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},2461:(e,t,n)=>{var r=n(8627);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},8190:(e,t,n)=>{var r=n(8627);e.exports=function(e){return r(this.__data__,e)>-1}},5670:(e,t,n)=>{var r=n(8627);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},6881:(e,t,n)=>{var r=n(1102),i=n(6491),o=n(5651);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},5089:(e,t,n)=>{var r=n(5502);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7548:(e,t,n)=>{var r=n(5502);e.exports=function(e){return r(this,e).get(e)}},2151:(e,t,n)=>{var r=n(5502);e.exports=function(e){return r(this,e).has(e)}},1476:(e,t,n)=>{var r=n(5502);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},5586:(e,t,n)=>{var r=n(2221)(Object,"create");e.exports=r},4040:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},9214:(e,t,n)=>{e=n.nmd(e);var r=n(6954),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=a},4591:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8892:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},8296:(e,t,n)=>{var r=n(4175),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),c=Array(a);++s<a;)c[s]=o[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=o[s];return u[t]=n(c),r(e,this,u)}}},9649:(e,t,n)=>{var r=n(6954),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},434:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},6660:(e,t,n)=>{var r=n(2956),i=n(2249)(r);e.exports=i},2249:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},8023:(e,t,n)=>{var r=n(6491);e.exports=function(){this.__data__=new r,this.size=0}},9611:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},6138:e=>{e.exports=function(e){return this.__data__.get(e)}},6961:e=>{e.exports=function(e){return this.__data__.has(e)}},2631:(e,t,n)=>{var r=n(6491),i=n(5651),o=n(2290);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},7606:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},1914:e=>{e.exports=function(e){return function(){return e}}},7689:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},9568:e=>{e.exports=function(e){return e}},7987:(e,t,n)=>{var r=n(621),i=n(7734),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},9546:e=>{var t=Array.isArray;e.exports=t},6387:(e,t,n)=>{var r=n(3331),i=n(459);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},71:(e,t,n)=>{var r=n(6387),i=n(7734);e.exports=function(e){return i(e)&&r(e)}},758:(e,t,n)=>{e=n.nmd(e);var r=n(9649),i=n(8854),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c},3331:(e,t,n)=>{var r=n(8247),i=n(2289);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},459:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},2289:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7734:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},5128:(e,t,n)=>{var r=n(8247),i=n(5506),o=n(7734),s=Function.prototype,a=Object.prototype,c=s.toString,u=a.hasOwnProperty,l=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},5739:(e,t,n)=>{var r=n(9278),i=n(9199),o=n(9214),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},4399:(e,t,n)=>{var r=n(7296),i=n(6827),o=n(6387);e.exports=function(e){return o(e)?r(e,!0):i(e)}},9488:(e,t,n)=>{var r=n(663),i=n(6921)((function(e,t,n){r(e,t,n)}));e.exports=i},8854:e=>{e.exports=function(){return!1}},7602:(e,t,n)=>{var r=n(322),i=n(4399);e.exports=function(e){return r(e,i(e))}},2775:()=>{var e;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return re(Object.create(null))}:s?function(){return re({__proto__:null})}:function(){return re({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,p=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,h=new(l||"function"!=typeof WeakMap?ne():WeakMap);function f(e,t,n,r){if(Z(n)){if(!q(e))throw new TypeError;if(!H(t))throw new TypeError;return E(e,t)}if(!q(e))throw new TypeError;if(!M(t))throw new TypeError;if(!M(r)&&!Z(r)&&!L(r))throw new TypeError;return L(r)&&(r=void 0),R(e,t,n=$(n),r)}function g(e,t){function n(n,r){if(!M(n))throw new TypeError;if(!Z(r)&&!W(r))throw new TypeError;P(e,t,n,r)}return n}function v(e,t,n,r){if(!M(n))throw new TypeError;return Z(r)||(r=$(r)),P(e,t,n,r)}function y(e,t,n){if(!M(t))throw new TypeError;return Z(n)||(n=$(n)),x(e,t,n)}function m(e,t,n){if(!M(t))throw new TypeError;return Z(n)||(n=$(n)),T(e,t,n)}function b(e,t,n){if(!M(t))throw new TypeError;return Z(n)||(n=$(n)),C(e,t,n)}function _(e,t,n){if(!M(t))throw new TypeError;return Z(n)||(n=$(n)),I(e,t,n)}function w(e,t){if(!M(e))throw new TypeError;return Z(t)||(t=$(t)),N(e,t)}function S(e,t){if(!M(e))throw new TypeError;return Z(t)||(t=$(t)),j(e,t)}function A(e,t,n){if(!M(t))throw new TypeError;Z(n)||(n=$(n));var r=O(t,n,!1);if(Z(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}function E(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!Z(r)&&!L(r)){if(!H(r))throw new TypeError;t=r}}return t}function R(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!Z(o)&&!L(o)){if(!M(o))throw new TypeError;r=o}}return r}function O(e,t,n){var r=h.get(e);if(Z(r)){if(!n)return;r=new d,h.set(e,r)}var i=r.get(t);if(Z(i)){if(!n)return;i=new d,r.set(t,i)}return i}function x(e,t,n){if(T(e,t,n))return!0;var r=J(t);return!L(r)&&x(e,r,n)}function T(e,t,n){var r=O(t,n,!1);return!Z(r)&&B(r.has(e))}function C(e,t,n){if(T(e,t,n))return I(e,t,n);var r=J(t);return L(r)?void 0:C(e,r,n)}function I(e,t,n){var r=O(t,n,!1);if(!Z(r))return r.get(e)}function P(e,t,n,r){O(n,r,!0).set(e,t)}function N(e,t){var n=j(e,t),r=J(e);if(null===r)return n;var i=N(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new p,s=[],a=0,c=n;a<c.length;a++){var u=c[a];o.has(u)||(o.add(u),s.push(u))}for(var l=0,d=i;l<d.length;l++){u=d[l];o.has(u)||(o.add(u),s.push(u))}return s}function j(e,t){var n=[],r=O(e,t,!1);if(Z(r))return n;for(var i=G(r.keys()),o=0;;){var s=X(i);if(!s)return n.length=o,n;var a=Y(s);try{n[o]=a}catch(c){try{Q(i)}finally{throw c}}o++}}function k(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function Z(e){return void 0===e}function L(e){return null===e}function D(e){return"symbol"==typeof e}function M(e){return"object"==typeof e?null!==e:"function"==typeof e}function F(e,t){switch(k(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=K(e,r);if(void 0!==i){var o=i.call(e,n);if(M(o))throw new TypeError;return o}return U(e,"default"===n?"number":n)}function U(e,t){if("string"===t){var n=e.toString;if(z(n))if(!M(i=n.call(e)))return i;if(z(r=e.valueOf))if(!M(i=r.call(e)))return i}else{var r;if(z(r=e.valueOf))if(!M(i=r.call(e)))return i;var i,o=e.toString;if(z(o))if(!M(i=o.call(e)))return i}throw new TypeError}function B(e){return!!e}function V(e){return""+e}function $(e){var t=F(e,3);return D(t)?t:V(t)}function q(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function z(e){return"function"==typeof e}function H(e){return"function"==typeof e}function W(e){switch(k(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!z(n))throw new TypeError;return n}}function G(e){var t=K(e,i);if(!z(t))throw new TypeError;var n=t.call(e);if(!M(n))throw new TypeError;return n}function Y(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Q(e){var t=e.return;t&&t.call(e)}function J(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,n=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function u(){var t=a(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",f),e("metadata",g),e("defineMetadata",v),e("hasMetadata",y),e("hasOwnMetadata",m),e("getMetadata",b),e("getOwnMetadata",_),e("getMetadataKeys",w),e("getOwnMetadataKeys",S),e("deleteMetadata",A)}(r)}()}(e||(e={}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),((e,t,r,i,o,s,a,c,u,l,d)=>{const p=null!=(i=null!=(o=r.Reflect)?o:t.Reflect)?i:e.Reflect;t.Reflect=void 0,r.Reflect=void 0,e.Reflect=void 0,n(2775),e.Reflect=null!=(s=null!=(a=e.Reflect)?a:r.Reflect)?s:t.Reflect,r.Reflect=null!=(c=null!=(u=r.Reflect)?u:e.Reflect)?c:t.Reflect,t.Reflect=null!=(l=null!=(d=t.Reflect)?d:e.Reflect)?l:r.Reflect,n(8586).O(e),e.Reflect=p,t.Reflect=p,r.Reflect=p})(window,"undefined"!=typeof global?global:{},"undefined"!=typeof globalThis?globalThis:{})})();
//# sourceMappingURL=widget.js.map
//# debugId=a07ce382-cebf-5d83-9af9-c27470030066
